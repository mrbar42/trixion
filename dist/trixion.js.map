{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap a14047af2cded01613d3","webpack:///./src/lib/index.js","webpack:///./src/lib/preact.js","webpack:///./~/preact/dist/preact.js","webpack:///./src/lib/reselect.js","webpack:///./src/lib/utils.js","webpack:///./src/polyfill/set-immediate.js","webpack:///./src/lib/store-persistence.js","webpack:///./src/lib/store/index.js","webpack:///./src/lib/storage.js","webpack:///./src/lib/reselect-connect.js","webpack:///./src/lib/routing.js","webpack:///./src/lib/router.js","webpack:///./src/lib/store/history/index.js","webpack:///./src/lib/store/history/history.js","webpack:///./src/lib/helpers/url-format.js"],"names":["DOM","$","createElement","E","Component","createClass","render","findDOMNode","unmountComponentAtNode","h","preact","PropTypes","createSelector","cl","DEBUG","parseUri","assign","setImmediate","clearImmediate","attachPersistence","attachSessionPersistence","connect","navigate","url","go","index","options","back","app","dispatch","store","addReducer","Router","Link","module","exports","componentPrototype","prototype","wrapTag","args","Array","slice","call","arguments","unshift","tag","apply","Error","component","node","merge","lastChild","obj","__CREF__","F","p","Object","create","getDOMNode","base","isMounted","i","constructor","defineProperty","value","writable","container","predicates","split","forEach","x","supportedTags","reduce","t","dependencies","length","resultFunc","pop","state","_","props","cachedDependencies","map","lastVal","newVal","dependency","lastProps","collectedDeps","collectDependencies","changed","collectedData","didChange","data","filter","join","process","env","NODE_ENV","uri","location","replace","pathIndex","indexOf","searchIndex","hashIndex","pathname","search","hash","target","undefined","TypeError","output","source","nextKey","hasOwnProperty","polyfill","window","splice","setTimeout","clearTimeout","handle","path","STORAGE_KEY","key","sessionState","getItem","isNonEmptyObj","subscribe","setItem","session","persistentState","persistent","toString","keys","removeReducer","ROOT_PATH","BOOT_ACTION","listeners","pendingUpdates","booted","_reducers","action","listener","subscriber","unsubscribe","forceUpdate","invokeListeners","getState","reducer","addItem","reducerItem","invokeReducers","type","push","destroy","reducers","getDeepPath","dataSection","parent","prop","retVal","assignRecursive","result","rootObj","paths","l","deepFreeze","statePath","normalizedAction","isObj","payload","didChanged","updateSubscribers","add","Set","rootInvoked","newState","list","invokedListeners","values","remove","delete","size","has","seen","childChanged","isArray","freeze","onStorageChange","offStorageChange","sessionGet","sessionStorage","JSON","parse","e","removeItem","sessionSet","stringify","sessionStore","persistentGet","localStorage","persistentSet","listenersCache","Map","eventListener","set","addEventListener","eventListeners","get","removeEventListener","persistentStore","createConnector","mapStateToProps","mapDispatchToProps","mergeProps","a","b","c","hooks","getLifeCycleHooks","cachedProps","handler","hasCached","stateProps","dispatchProps","mergedProps","storeListener","componentWillMount","bind","componentWillUnmount","nextProps","componentWillReceiveProps","context","arg","getInitialState","componentDidMount","handleChange","setState","routes","updateRouter","router","to","activeClass","onClick","className","createRouter","opts","refreshRouter","getComponent","defaultRoute","matchedChild","instance","Route","route","resolve","default","destroyed","getLoader","matchedRoute","matchRoute","unmount","mount","console","warn","componentAsync","onEnter","onEnterAsync","baseComponent","isStringPath","RegExp","strictPath","lineage","paramNames","preparePath","mounted","asyncLock","loading","loadingStart","params","children","child","preserveHash","preserveQuery","Date","canceled","done","err","asyncComponent","loadingTimer","wasMounted","onLeave","match","matcher","resolveDiff","exec","isStrict","strictMatcher","test","matchChildren","loader","regex","pathRegex","g1","paramRegex","some","matched","joined","item","historyMiddleware","NAVIGATION_INTERNAL_ACTION","history","onChange","scrollToTop","parsedUri","formattedUrl","update","parseInt","History","event","newUrl","scroll","noBoundary","pushState","replaceState","format","urlObj","protocol","auth","port"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;;AAEA;;;;;;;;;;;;oBA0BEA,G;;;;;;oBACAC,C;;;;;;oBACAC,a;;;;;;oBACAC,C;;;;;;oBACAC,S;;;;;;oBACAC,W;;;;;;oBACAC,M;;;;;;oBACAC,W;;;;;;oBACAC,sB;;;;;;oBACAC,C;;;;;;oBACAC,M;;;;;;oBACAC,S;;;;;;;;;sBAGMC,c;;;;;;;;;mBACAC,E;;;;;;mBAAIC,K;;;;;;mBAAOC,Q;;;;;;mBAAUC,M;;;;;;;;;0BACrBC,Y;;;;;;0BAAcC,c;;;;;;;;;8BAEdC,iB;;;;;;8BAAmBC,wB;;;;AA3C3B;;AACA;;AAEA;;AACA;;;;;;AAGA;AACA;AACA,wBAAW,oCAAX;;AAEA;AACA,KAAMC,UAAU,mDAAhB;;AAEA;AACA,KAAMC,WAAW,SAAXA,QAAW;AAAA,UAAO,kBAAM,uBAAgBC,GAAhB,CAAN,CAAP;AAAA,EAAjB;AACA,KAAMC,KAAK,SAALA,EAAK,CAACC,KAAD,EAAQC,OAAR;AAAA,UAAoB,kBAAM,iBAAUD,KAAV,CAAN,EAAwBC,OAAxB,CAApB;AAAA,EAAX;AACA,KAAMC,OAAO,SAAPA,IAAO;AAAA,UAAW,kBAAM,iBAAU,CAAC,CAAX,EAAcD,OAAd,CAAN,CAAX;AAAA,EAAb;;AAEA;AACA,KAAME,MAAM,EAAZ;;AAEA;AACA;;AAqBA;SAGWC,Q;SACTC,K;SACAC,U;SAEAV,O,GAAAA,O;SAEAW,M;SACAC,I;SAEAX,Q,GAAAA,Q;SACAE,E,GAAAA,E;SACAG,I,GAAAA,I;SAEAC,G,GAAAA,G;mBAGaM,OAAOC,O;;;;;;ACnEtB;;;;;;SAegBlC,C,GAAAA,C;SAUAK,M,GAAAA,M;SAIAD,W,GAAAA,W;SAkCAG,sB,GAAAA,sB;SAIAD,W,GAAAA,W;;AAjEhB;;KAAYG,M;;;;KACPD,C,GAAgBC,M,CAAhBD,C;KAAGL,S,GAAaM,M,CAAbN,S;;;AAER,KAAIgC,qBAAqBhC,UAAUiC,SAAnC;;AAEA,KAAIC,UAAU,SAAVA,OAAU,MAAO;AACnB,UAAO,YAAY;AACjB,SAAIC,OAAOC,MAAMH,SAAN,CAAgBI,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,CAAX;AACAJ,UAAKK,OAAL,CAAaC,GAAb;AACA,YAAOpC,EAAEqC,KAAF,CAAQ,IAAR,EAAcP,IAAd,CAAP;AACD,IAJD;AAKD,EAND;;AAQO,UAAStC,CAAT,GAAa;AAClB,OAAI,CAAC0C,UAAU,CAAV,CAAL,EAAmB,MAAM,IAAII,KAAJ,CAAU,+BAAV,CAAN;;AAEnB,OAAI,OAAOJ,UAAU,CAAV,EAAarC,MAApB,IAA8B,UAA9B,KAA6C,CAACqC,UAAU,CAAV,EAAaN,SAAd,IAA2B,CAACM,UAAU,CAAV,EAAaN,SAAb,CAAuB/B,MAAhG,CAAJ,EAA6G;AAC3GqC,eAAU,CAAV,IAAetC,YAAYsC,UAAU,CAAV,CAAZ,CAAf;AACD;;AAED,UAAOlC,EAAEqC,KAAF,CAAQ,IAAR,EAAcH,SAAd,CAAP;AACD;;AAEM,UAASrC,MAAT,CAAgB0C,SAAhB,EAA2BC,IAA3B,EAAiCC,KAAjC,EAAwC;AAC7C,UAAOxC,OAAOJ,MAAP,CAAc0C,SAAd,EAAyBC,IAAzB,EAA+BC,SAASD,KAAKE,SAA7C,CAAP;AACD;;AAEM,UAAS9C,WAAT,CAAqB+C,GAArB,EAA0B;;AAE/B,OAAIA,IAAIC,QAAR,EAAkB,OAAOD,IAAIC,QAAX;;AAElB,YAASC,CAAT,GAAa;AACXlD,eAAU0C,KAAV,CAAgB,IAAhB,EAAsBH,SAAtB;AACD;;AAED,OAAIY,IAAID,EAAEjB,SAAF,GAAcmB,OAAOC,MAAP,CAAcrB,kBAAd,CAAtB;AACAkB,KAAEjB,SAAF,CAAYqB,UAAZ,GAAyB,YAAY;AACnC,YAAO,KAAKC,IAAZ;AACD,IAFD;AAGAL,KAAEjB,SAAF,CAAYuB,SAAZ,GAAwB,YAAY;AAClC,YAAO,CAAC,CAAC,KAAKD,IAAd;AACD,IAFD;AAGA,QAAK,IAAIE,CAAT,IAAcT,GAAd,EAAmB;AACjB,SAAI,qBAAqBS,CAAzB,EAA4B;AAC1B;AACAP,SAAE,cAAF,IAAoBF,IAAIS,CAAJ,GAApB;AACD;AACD;AACAN,OAAEM,CAAF,IAAOT,IAAIS,CAAJ,CAAP;AACD;;AAEDN,KAAEO,WAAF,GAAgBR,CAAhB;;AAEAE,UAAOO,cAAP,CAAsBX,GAAtB,EAA2B,UAA3B,EAAuC;AACrCY,YAAOV,CAD8B;AAErCW,eAAU;AAF2B,IAAvC;;AAKA,UAAOX,CAAP;AACD;;AAEM,UAAS9C,sBAAT,CAAgC0D,SAAhC,EAA2C;AAChD5D,UAAOG,EAAE;AAAA,YAAM,IAAN;AAAA,IAAF,CAAP,EAAsByD,SAAtB;AACD;;AAEM,UAAS3D,WAAT,CAAqByC,SAArB,EAAgC;AACrC,UAAOA,UAAUW,IAAV,IAAkB,IAAzB;AACD;;AAED,KAAIhD,YAAY,EAAhB;;AAEA,KAAIwD,aAAa,sDACf,8DADF;;AAGAA,YACGC,KADH,CACS,GADT,EAEGC,OAFH,CAEW;AAAA,UAAK1D,UAAU2D,CAAV,IAAe;AAAA,YAAM,EAAN;AAAA,IAApB;AAAA,EAFX;;SAKElE,S,GAAAA,S;SACAK,C,GAAAA,C;SACKP,a,GAALD,C;SACKE,C,GAALF,C;SACAS,M,GAAAA,M;SACAC,S,GAAAA,S;;;AAGF,KAAM4D,gBAAgB,2EACpB,+FADoB,GAEpB,iGAFoB,GAGpB,6FAHoB,GAIpB,6FAJoB,GAKpB,4FALoB,GAMpB,yEANF;;AAQA;;;;;;AAMA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmHO,KAAMvE,oBAAMuE,cAChBH,KADgB,CACV,GADU,EAEhBI,MAFgB,CAET,UAACb,IAAD,EAAOc,CAAP,EAAa;AACnBd,QAAKc,CAAL,IAAUnC,QAAQmC,CAAR,CAAV;AACA,UAAOd,IAAP;AACD,EALgB,EAKd,EALc,CAAZ,C;;;;;;AC1NP;AACA,wJAA4M;AAC5M,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,SAAS;AAC3C;AACA;AACA;AACA;AACA,gGAA+F,KAAK,wBAAwB;AAC5H;AACA;AACA,8EAA6E;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB;AACxB;AACA;AACA,4CAA2C,qBAAqB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAqD;AACrD,mBAAkB,oBAAoB,gFAAgF;AACtH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kKAAiK;AACjK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B,mEAAmE;AAChG;AACA;AACA;AACA;AACA;AACA,UAAS,2FAA2F;AACpG,6DAA4D;AAC5D;AACA;AACA;AACA,cAAa;AACb;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA,mIAAkI,iCAAiC,iJAAiJ;AACpT;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAsD,KAAK;AAC3D;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,8FAA6F;AAC7F,iCAAgC,SAAS;AACzC;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,kCAAiC,UAAU;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,oDAAoD,iBAAiB;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA6E;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAiE;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC;AACvC;AACA;AACA;AACA;AACA,4CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+IAA8I;AAC9I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+IAA8I;AAC9I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sJAAqJ;AACrJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAiE;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAkE;AAClE;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD,mC;;;;;;ACleA;;;;;;;;;;SAEgB/C,c,GAAAA,c;AAAT,UAASA,cAAT,GAA0B;AAC/B,OAAI8D,eAAelC,MAAMH,SAAN,CAAgBI,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,CAAnB;AACA,OAAI,CAAC+B,aAAaC,MAAlB,EAA0B,MAAM,IAAI5B,KAAJ,CAAU,kDAAV,CAAN;AAC1B,OAAI6B,aAAaF,aAAaG,GAAb,EAAjB;AACA;AACA,OAAI,CAACH,aAAaC,MAAlB,EAA0BD,eAAe,CAAC;AAAA,YAAOI,KAAP;AAAA,IAAD,EAAe,UAACC,CAAD,EAAIC,KAAJ;AAAA,YAAYA,KAAZ;AAAA,IAAf,CAAf;;AAE1B;AACA,OAAIC,qBAAqBP,aAAaQ,GAAb,CAAiB,sBAAc;AACtD,SAAIC,UAAU,EAAd;AACA,YAAO,YAAY;AACjB,WAAI5C,OAAOC,MAAMH,SAAN,CAAgBI,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,CAAX;AACA,WAAIyC,SAASC,WAAWvC,KAAX,CAAiB,IAAjB,EAAuBP,IAAvB,CAAb;AACA,WAAI4C,YAAYC,MAAhB,EAAwB;AACtB;AACAD,mBAAUC,MAAV;AACA,gBAAO,CAAC,IAAD,EAAOA,MAAP,CAAP;AACD;AACD;AACA,cAAO,CAAC,KAAD,EAAQA,MAAR,CAAP;AACD,MAVD;AAWD,IAbwB,CAAzB;;AAeA,OAAIE,kBAAJ;AACA,UAAO,UAAUR,KAAV,EAAiBE,KAAjB,EAAwB;AAC7B;AACA,SAAIO,gBAAgBC,oBAAoBV,KAApB,EAA2BE,KAA3B,EAAkCC,kBAAlC,CAApB;;AAEA;AACA,SAAIM,iBAAiB,CAACD,SAAtB,EAAiC;AAC/B;AACA;AACAA,mBAAYV,WAAW9B,KAAX,CAAiB,IAAjB,EAAuByC,aAAvB,CAAZ;AACA,WAAI,CAACD,SAAD,IAAc,QAAOA,SAAP,yCAAOA,SAAP,MAAoB,QAAtC,EAAgD,MAAM,IAAIvC,KAAJ,CAAU,oCAAV,CAAN;AAChD,cAAO,CAAC,IAAD,EAAOuC,SAAP,CAAP;AACD;;AAED,YAAO,CAAC,KAAD,EAAQA,SAAR,CAAP;AACD,IAdD;AAeD;;AAGD,UAASE,mBAAT,CAA6BV,KAA7B,EAAoCE,KAApC,EAA2CN,YAA3C,EAAyD;AACvD,OAAIe,UAAU,KAAd;AACA,OAAIC,gBAAgBhB,aAAaQ,GAAb,CAAiB,sBAAc;AAAA,uBACzBG,WAAWP,KAAX,EAAkBE,KAAlB,CADyB;AAAA;AAAA,SAC5CW,SAD4C;AAAA,SACjCC,IADiC;;AAEjD,SAAID,SAAJ,EAAeF,UAAU,IAAV;AACf,YAAOG,IAAP;AACD,IAJmB,CAApB;;AAMA,OAAIH,OAAJ,EAAa,OAAOC,aAAP;AACd,E;;;;;;ACrDD;;AAEA;;;;;SACgB7E,E,GAAAA,E;SAQAE,Q,GAAAA,Q;AART,UAASF,EAAT,GAAc;AACnB,OAAI0B,OAAOC,MAAMH,SAAN,CAAgBI,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,CAAX;;AAEA,UAAOJ,KAAKsD,MAAL,CAAY;AAAA,YAAK,CAAC,CAACvB,CAAP;AAAA,IAAZ,EAAsBwB,IAAtB,CAA2B,GAA3B,CAAP;AACD;;AAEM,KAAMhF,wBAAQ,OAAOiF,OAAP,KAAmB,WAAnB,IAAkCA,QAAQC,GAA1C,IAAiDD,QAAQC,GAAR,CAAYC,QAAZ,IAAwB,YAAvF;;AAEA,UAASlF,QAAT,CAAkBmF,GAAlB,EAAuB;AAC5B,OAAIC,WAAW,EAAf;;AAEAD,SAAMA,IAAIE,OAAJ,CAAY,cAAZ,EAA4B,EAA5B,CAAN;;AAEA,OAAIC,YAAYH,IAAII,OAAJ,CAAY,GAAZ,CAAhB;AACA,OAAIC,cAAcL,IAAII,OAAJ,CAAY,GAAZ,CAAlB;AACA,OAAIE,YAAYN,IAAII,OAAJ,CAAY,GAAZ,CAAhB;;AAEA,OAAID,aAAa,CAAC,CAAlB,EAAqB;AACnBF,cAASM,QAAT,GAAoB,EAApB;AACD,IAFD,MAGK;AACHN,cAASM,QAAT,GAAoBP,IAAIzD,KAAJ,CAAU4D,SAAV,EAAqBE,eAAe,CAAC,CAAhB,GAAoBL,IAAIvB,MAAxB,GAAiC4B,WAAtD,CAApB;AACD;AACD,OAAIA,eAAe,CAAC,CAApB,EAAuB;AACrBJ,cAASO,MAAT,GAAkBR,IAAIzD,KAAJ,CAAU8D,cAAc,CAAxB,EAA2BC,aAAa,CAAC,CAAd,GAAkBN,IAAIvB,MAAtB,GAA+B6B,SAA1D,CAAlB;AACD;AACD,OAAIA,aAAa,CAAC,CAAlB,EAAqB;AACnBL,cAASQ,IAAT,GAAgBT,IAAIzD,KAAJ,CAAU+D,YAAY,CAAtB,EAAyBN,IAAIvB,MAA7B,CAAhB;AACD;;AAED,UAAOwB,QAAP;AACD;;AAGM,KAAMnF,0BAASwC,OAAOxC,MAAP,IAAiB,UAAU4F,MAAV,EAAkB;AACrD,OAAIA,WAAWC,SAAX,IAAwBD,WAAW,IAAvC,EAA6C;AAC3C,WAAM,IAAIE,SAAJ,CAAc,4CAAd,CAAN;AACD;;AAED,OAAMC,SAASvD,OAAOoD,MAAP,CAAf;AACA,QAAK,IAAInF,QAAQ,CAAjB,EAAoBA,QAAQkB,UAAUgC,MAAtC,EAA8ClD,OAA9C,EAAuD;AACrD,SAAMuF,SAASrE,UAAUlB,KAAV,CAAf;AACA,SAAIuF,WAAWH,SAAX,IAAwBG,WAAW,IAAvC,EAA6C;AAC3C,YAAK,IAAMC,OAAX,IAAsBD,MAAtB,EAA8B;AAC5B,aAAIxD,OAAOnB,SAAP,CAAiB6E,cAAjB,CAAgCxE,IAAhC,CAAqCsE,MAArC,EAA6CC,OAA7C,CAAJ,EAA2D;AACzDF,kBAAOE,OAAP,IAAkBD,OAAOC,OAAP,CAAlB;AACD;AACF;AACF;AACF;AACD,UAAOF,MAAP;AACD,EAjBI,C;;;;;;ACrCP;;;;;SAgBgBI,Q,GAAAA,Q;AAdT,KAAMlG,sCAAemG,OAAOnG,YAAP,IAAuB,YAAY;AAC3D,OAAIsB,OAAO,EAAX;AACA,OAAIsB,IAAI,CAAC,CAAT;AACA,UAAO,EAAEA,CAAF,GAAMlB,UAAUgC,MAAvB;AAA+BpC,UAAKsB,CAAL,IAAUlB,UAAUkB,CAAV,CAAV;AAA/B,IAH2D,CAI3D;AACAtB,QAAK8E,MAAL,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB;;AAEA,UAAOC,WAAWxE,KAAX,CAAiBsE,MAAjB,EAAyB7E,IAAzB,CAAP;AACD,EARI;;AAUA,KAAMrB,0CAAiBkG,OAAOlG,cAAP,IAA0B;AAAA,UAAUqG,aAAaC,MAAb,CAAV;AAAA,EAAjD;;mBAEQvG,Y;AAER,UAASkG,QAAT,GAAoB;AACzBC,UAAOnG,YAAP,GAAsBA,YAAtB;AACAmG,UAAOlG,cAAP,GAAwBA,cAAxB;AACD,E;;;;;;ACnBD;;;;;SAagBE,wB,GAAAA,wB;SAaAD,iB,GAAAA,iB;;AAxBhB;;AACA;;AAEA;;;;;;;AAQO,UAASC,wBAAT,CAAkCqG,IAAlC,EAAsD;AAAA,OAAd/F,OAAc,uEAAJ,EAAI;;AAC3D,OAAI,CAAC+F,IAAL,EAAW,MAAM,IAAI1E,KAAJ,CAAU,kEAAV,CAAN;AACX,OAAM2E,cAAchG,QAAQiG,GAAR,IAAe,OAAnC;;AAEA;AACA,OAAIC,eAAe,sBAAaC,OAAb,CAAqBH,WAArB,CAAnB;AACA,OAAII,cAAcF,YAAd,CAAJ,EAAiC,kBAAMH,IAAN,EAAYG,YAAZ;AACjC;AACA,gBAAMG,SAAN,CAAgBN,IAAhB,EAAsB;AAAA,YAAS,sBAAaO,OAAb,CAAqBN,WAArB,EAAkC5C,MAAMmD,OAAxC,CAAT;AAAA,IAAtB;AACD;;mBAGc9G,iB;AACR,UAASA,iBAAT,CAA2BsG,IAA3B,EAA+C;AAAA,OAAd/F,OAAc,uEAAJ,EAAI;;AACpD,OAAI,CAAC+F,IAAL,EAAW,MAAM,IAAI1E,KAAJ,CAAU,qEAAV,CAAN;AACX,OAAM2E,cAAchG,QAAQiG,GAAR,IAAe,OAAnC;;AAEA;AACA,OAAIO,kBAAkB,yBAAgBL,OAAhB,CAAwBH,WAAxB,CAAtB;AACA,OAAII,cAAcI,eAAd,CAAJ,EAAoC,kBAAMR,WAAN,EAAmBQ,eAAnB;AACpC;AACA,iCAAgBR,WAAhB,EAA6B;AAAA,YAAmB,kBAAMD,IAAN,EAAYS,eAAZ,CAAnB;AAAA,IAA7B;AACA;AACA,gBAAMH,SAAN,CAAgBN,IAAhB,EAAsB;AAAA,YAAS,yBAAgBO,OAAhB,CAAwBN,WAAxB,EAAqC5C,MAAMqD,UAA3C,CAAT;AAAA,IAAtB;AACD;;AAED,UAASL,aAAT,CAAuB1E,GAAvB,EAA4B;AAC1B,UAAOI,OAAOnB,SAAP,CAAiB+F,QAAjB,CAA0B1F,IAA1B,CAA+BU,GAA/B,MAAwC,iBAAxC,IACLI,OAAO6E,IAAP,CAAYjF,GAAZ,EAAiBuB,MADnB;AAED,E;;;;;;AC1CD;;;;;;;;SAyCgB7C,K,GAAAA,K;SAwBAC,U,GAAAA,U;SAiCAuG,a,GAAAA,a;;AAhGhB;;AACA;;AAEA,KAAMC,YAAY,eAAlB;AACA,KAAMC,cAAc,iBAApB;AACA,KAAMC,YAAYjF,OAAOC,MAAP,CAAc,IAAd,CAAlB;AACA;AACA,KAAM3C,QAAQ,OAAOiF,OAAP,KAAmB,WAAnB,IAAkCA,QAAQC,GAA1C,IAAiDD,QAAQC,GAAR,CAAYC,QAAZ,IAAwB,YAAvF;AACA,KAAInB,QAAQ,EAAZ;AACA,KAAI4D,iBAAiB,IAArB;AACA,KAAIC,eAAJ;AACA,KAAIC,YAAY,EAAhB;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BO,UAAS9G,KAAT,CAAe2F,IAAf,EAAqBoB,MAArB,EAA6B;AAClC,UAAOhH,SAAS4F,IAAT,EAAeoB,MAAf,CAAP;AACD;mBACc/G,K;;;AAEfA,OAAMiG,SAAN,GAAkB,UAAUN,IAAV,EAAgBqB,QAAhB,EAA0B;AAC1C,UAAOC,WAAWtB,IAAX,EAAiBqB,QAAjB,CAAP;AACD,EAFD;;AAIAhH,OAAMkH,WAAN,GAAoB,UAAUvB,IAAV,EAAgBqB,QAAhB,EAA0B;AAC5C,UAAOC,WAAWtB,IAAX,EAAiBqB,QAAjB,EAA2B,IAA3B,CAAP;AACD,EAFD;;AAIAhH,OAAMmH,WAAN,GAAoB,YAAY;AAC9B,QAAK,IAAIxB,IAAT,IAAiBgB,SAAjB,EAA4B;AAC1B;AACAS,qBAAgBT,UAAUhB,IAAV,CAAhB,EAAiC,CAAC3C,KAAD,CAAjC;AACD;AACF,EALD;;AAOAhD,OAAMqH,QAAN,GAAiB,YAAY;AAC3B,UAAOrH,OAAP;AACD,EAFD;;AAIO,UAASC,UAAT,CAAoB0F,IAApB,EAA0B2B,OAA1B,EAAmC;AACxC,OAAI,OAAO3B,IAAP,IAAe,UAAnB,EAA+B;AAC7B2B,eAAU3B,IAAV;AACAA,YAAO,IAAP;AACD;;AAED,OAAIA,QAAQ,OAAOA,IAAP,IAAe,QAAvB,IAAmC,CAAC2B,OAAxC,EAAiD;AAC/C,WAAM,IAAIrG,KAAJ,CAAU,+EAAV,CAAN;AACD;;AAED,OAAIsG,UAAU,SAAVA,OAAU,GAAM;AAClB,SAAIC,cAAc;AAChB7B,aAAMA,QAAQ,EADE;AAEhB2B;AAFgB,MAAlB;AAIA;AACAG,oBAAe,CAACD,WAAD,CAAf,EAA8BxE,KAA9B,EAAqC,EAAC0E,MAAMhB,WAAP,EAArC;;AAEAI,eAAUa,IAAV,CAAeH,WAAf;AACD,IATD;;AAWA;AACA,OAAIX,MAAJ,EAAYU,UAAZ,KACK,gCAAaA,OAAb;;AAEL,UAAO;AACLK,YADK,qBACK;AACR,WAAIf,MAAJ,EAAYL,cAAcb,IAAd,EAAoB2B,OAApB,EAAZ,KACK,gCAAad,aAAb,EAA4Bb,IAA5B,EAAkC2B,OAAlC;AACN;AAJI,IAAP;AAMD;;AAEM,UAASd,aAAT,CAAuBb,IAAvB,EAA6B2B,OAA7B,EAAsC;AAC3C,OAAI,OAAO3B,IAAP,IAAe,UAAnB,EAA+B;AAC7B2B,eAAU3B,IAAV;AACAA,YAAO,IAAP;AACD;;AAED,OAAIhG,QAAQmH,UAAUtC,OAAV,CAAkB8C,OAAlB,CAAZ;AACA,OAAI3H,UAAU,CAAC,CAAf,EAAkB;AAChBmH,eAAUvB,MAAV,CAAiB5F,KAAjB,EAAwB,CAAxB;AACD;AACF;;AAED;;AAEA,iCAAa;AAAA,UAAM,gCAAa;AAAA,YAAM,gCAAa;AAAA,cAAMkH,SAAS,IAAf;AAAA,MAAb,CAAN;AAAA,IAAb,CAAN;AAAA,EAAb;;AAEA,UAASY,cAAT,CAAwBI,QAAxB,EAAkC/D,IAAlC,EAAwCiD,MAAxC,EAAgD;AAC9C,OAAIrE,SAAS,SAATA,MAAS;AAAA,YAAMmF,SAChBnF,MADgB,CACT,UAACiB,OAAD,EAAU6D,WAAV,EAA0B;AAChC;AADgC,0BAEEM,YAAYN,YAAY7B,IAAxB,EAA8B7B,IAA9B,CAFF;AAAA;AAAA,WAE3BiE,WAF2B;AAAA,WAEdC,MAFc;AAAA,WAENC,IAFM;AAGhC;;;AACA,WAAIC,SAASV,YAAYF,OAAZ,CAAoBS,WAApB,EAAiChB,MAAjC,CAAb;;AAJgC,8BAKNoB,gBAAgBJ,WAAhB,EAA6BG,MAA7B,CALM;AAAA;AAAA,WAK3BrE,SAL2B;AAAA,WAKhBuE,MALgB;;AAMhC,WAAIvE,aAAamE,MAAjB,EAAyB;AACvBA,gBAAOC,IAAP,IAAeG,MAAf;AACD;AACD,cAAOvE,aAAaF,OAApB;AACD,MAXgB,EAWd,KAXc,CAAN;AAAA,IAAb;;AAaA,OAAIkD,MAAJ,EAAY,OAAOnE,QAAP;AACZ,UAAO,gCAAaA,MAAb,CAAP;AACD;;AAED,UAASoF,WAAT,CAAqBnC,IAArB,EAA2B0C,OAA3B,EAAoC;AAClC,OAAI,CAAC1C,IAAL,EAAW,OAAO,CAAC0C,OAAD,CAAP;AACX,OAAIC,QAAQ3C,KAAKrD,KAAL,CAAW,GAAX,CAAZ;AACA,OAAI0F,eAAJ;AACA,OAAIC,aAAJ;AACA,OAAInD,SAASuD,OAAb;AACA,OAAIE,IAAID,MAAMzF,MAAd;AACA,OAAId,IAAI,CAAR;AACA;AACA,UAAOA,IAAIwG,CAAX,EAAc;;AAEZ,SAAI9G,IAAI6G,MAAMvG,CAAN,CAAR;AACA;AACA,SAAI,CAAC+C,OAAOrD,CAAP,CAAL,EAAgB;AACdqD,cAAOrD,CAAP,IAAY,EAAZ;AACD;AACD;AACAuG,cAASlD,MAAT;AACAmD,YAAOxG,CAAP;AACAqD,cAASA,OAAOrD,CAAP,CAAT;AACAM;AACD;;AAED,UAAO,CAAC+C,MAAD,EAASkD,MAAT,EAAiBC,IAAjB,CAAP;AACD;;AAED,UAASlI,QAAT,CAAkB4F,IAAlB,EAAwBoB,MAAxB,EAAgC;AAC9B,OAAIpB,SAAS,KAAK,CAAlB,EAAqB;AACnB,YAAO3G,QAAQwJ,WAAWxF,KAAX,CAAR,GAA4BA,KAAnC;AACD,IAFD,MAGK,IAAI,OAAO2C,IAAP,IAAe,QAAf,IAA2BoB,WAAW,KAAK,CAA/C,EAAkD;AAAA,yBACnCe,YAAYnC,IAAZ,EAAkB3C,KAAlB,CADmC;AAAA;AAAA,SAChDyF,SADgD;;AAErD,YAAOzJ,QAAQwJ,WAAWC,SAAX,CAAR,GAAgCA,SAAvC;AACD;;AAED;AACA,OAAIC,yBAAJ;AACA,OAAIC,MAAMhD,IAAN,CAAJ,EAAiB;AACf+C,wBAAmB/C,IAAnB;AACD,IAFD,MAGK;AACH+C,wBAAmB;AACjBhB,aAAM/B,IADW;AAEjBiD,gBAAS7B;AAFQ,MAAnB;AAID;;AAED,OAAIpD,gBAAJ;AACA,OAAI,OAAOgC,IAAP,IAAe,QAAnB,EAA6B;AAC3B,SAAI,CAACgD,MAAM5B,MAAN,CAAL,EAAoB,MAAM,IAAI9F,KAAJ,CAAU,2DAAV,CAAN;AACpB,SAAI+G,eAAJ;AACA,SAAIC,aAAJ;AACA,SAAInD,eAAJ;AACA,SAAIa,QAAQ,MAAZ,EAAoB;AAClBb,gBAAS9B,KAAT;AACA6D,gBAAS,IAAT;AACD,MAHD,MAIK;AAAA,2BAEsBiB,YAAYnC,IAAZ,EAAkB3C,KAAlB,CAFtB;AACH;;;AADG;;AAEF8B,aAFE;AAEMkD,aAFN;AAEcC,WAFd;AAGJ;;AAZ0B,gBAaAE,gBAAgBrD,MAAhB,EAAwBiC,MAAxB,KAAmCpD,OAbnC;AAAA;AAAA,SAatBkF,UAbsB;AAAA,SAaVT,MAbU;;AAc3B,SAAIS,cAAcb,MAAlB,EAA0B;AACxBA,cAAOC,IAAP,IAAeG,MAAf;AACD;;AAEDzE,eAAUA,WAAWkF,UAArB;AACD,IAnBD,MAoBK;AACHlD,YAAO,EAAP;AACAhC,eAAU8D,eAAeX,SAAf,EAA0B9D,KAA1B,EAAiC0F,gBAAjC,KAAsD/E,OAAhE;AACD;;AAED;AACA,OAAIA,OAAJ,EAAa;AACXX,aAAQ,mBAAO,EAAP,EAAWA,KAAX,CAAR;AACA8F,uBAAkBnD,IAAlB;AACD;AACF;;AAED,UAASmD,iBAAT,CAA2BnD,IAA3B,EAAiC;AAC/B,OAAIE,MAAMF,QAAQc,SAAlB;AACA;AACA,OAAIG,cAAJ,EAAoB;AAClBA,oBAAemC,GAAf,CAAmBlD,GAAnB;AACA;AACD;;AAEDe,oBAAiB,IAAIoC,GAAJ,EAAjB;AACApC,kBAAemC,GAAf,CAAmBlD,GAAnB;AACA,mCAAa,YAAM;AACjB;AACA,SAAIoD,oBAAJ;AACA,SAAIC,WAAWlG,KAAf;AACA,SAAIhE,KAAJ,EAAW;AACTkK,kBAAWV,WAAWU,QAAX,CAAX;AACD;;AAED,SAAIC,OAAOvC,cAAX;AACAA,sBAAiB,IAAjB;AACA;AACA,SAAIwC,mBAAmB,IAAIJ,GAAJ,EAAvB;AAXiB;AAAA;AAAA;;AAAA;AAYjB,4BAAkBG,KAAKE,MAAL,EAAlB,8HAAiC;AAAA,aAAxBf,KAAwB;;AAC/BA,iBAAQA,MAAMhG,KAAN,CAAY,GAAZ,CAAR;AACA,gBAAOgG,MAAMzF,MAAb,EAAqB;AACnB,eAAI8C,QAAO2C,MAAMtE,IAAN,CAAW,GAAX,CAAX;AACA;AACA,eAAI2B,SAAQc,SAAZ,EAAuBwC,cAAc,IAAd;AACvB;AACA7B,2BAAgBT,UAAUhB,KAAV,CAAhB,EAAiC,CAACuD,QAAD,CAAjC,EAA6CE,gBAA7C;AACAd,iBAAMvF,GAAN;AACD;AACF;AAtBgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAwBjB,SAAI,CAACkG,WAAL,EAAkB;AAChB;AACA7B,uBAAgBT,UAAUF,SAAV,CAAhB,EAAsC,CAACyC,QAAD,CAAtC,EAAkDE,gBAAlD;AACD;AACF,IA5BD;AA6BD;;AAED,UAASnC,UAAT,CAAoBtB,IAApB,EAA0BqB,QAA1B,EAAoCsC,MAApC,EAA4C;AAC1C,OAAI,CAAC3D,IAAL,EAAW,MAAM,IAAI1E,KAAJ,CAAU,2BAAV,CAAN;AACX,OAAI,OAAO0E,IAAP,IAAe,UAAnB,EAA+B;AAC7BqB,gBAAWrB,IAAX;AACAA,YAAOc,SAAP;AACD;;AAED,OAAI,CAACE,UAAUhB,IAAV,CAAL,EAAsB;AACpBgB,eAAUhB,IAAV,IAAkB,IAAIqD,GAAJ,EAAlB;AACD;;AAED,OAAIM,MAAJ,EAAY;AACV3C,eAAUhB,IAAV,EAAgB4D,MAAhB,CAAuBvC,QAAvB;AACA,SAAI,CAACL,UAAUhB,IAAV,EAAgB6D,IAArB,EAA2B;AACzB,cAAO7C,UAAUhB,IAAV,CAAP;AACD;AACF,IALD,MAMK;AACHgB,eAAUhB,IAAV,EAAgBoD,GAAhB,CAAoB/B,QAApB;AACD;;AAED,UAAO,CAACsC,MAAD,IAAW;AACdpC,gBADc,yBACA;AACZD,kBAAWtB,IAAX,EAAiBqB,QAAjB,EAA2B,IAA3B;AACD;AAHa,IAAlB;AAKD;;AAED,UAASI,eAAT,CAAyBT,SAAzB,EAAoClG,IAApC,EAA0C2I,gBAA1C,EAA4D;AAC1DA,sBAAmBA,oBAAoB,IAAIJ,GAAJ,EAAvC;AACA,OAAI,CAACrC,SAAL,EAAgB;AAF0C;AAAA;AAAA;;AAAA;AAG1D,2BAAqBA,UAAU0C,MAAV,EAArB,mIAAyC;AAAA,WAAhCrC,QAAgC;;AACvC;AACA,WAAIoC,iBAAiBK,GAAjB,CAAqBzC,QAArB,CAAJ,EAAoC;AACpCoC,wBAAiBL,GAAjB,CAAqB/B,QAArB;;AAEAA,gBAAShG,KAAT,CAAe,IAAf,EAAqBP,IAArB;AACD;AATyD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAU3D;;AAED,UAAS0H,eAAT,CAAyBtG,IAAzB,EAA+BP,GAA/B,EAAoCoI,IAApC,EAA0C;AACxCA,UAAOA,QAAQ,EAAf;AACA;AACA,OAAIpI,QAAQ,IAAZ,EAAkB,OAAO,CAAC,IAAD,EAAO,EAAP,CAAP;;AAElB,OAAI,CAACqH,MAAMrH,GAAN,CAAL,EAAiB,OAAO,CAAC,KAAD,CAAP;AACjB,OAAIqC,UAAU,KAAd;AACA,QAAK,IAAIlC,CAAT,IAAcH,GAAd,EAAmB;AACjB,SAAI,CAACA,IAAI8D,cAAJ,CAAmB3D,CAAnB,CAAL,EAA4B;;AAE5B;AACA;AACA;AACA;AACA,SAAIkH,MAAMrH,IAAIG,CAAJ,CAAN,KAAiBkH,MAAM9G,KAAKJ,CAAL,CAAN,CAArB,EAAqC;AACnC,WAAIiI,KAAKlF,OAAL,CAAalD,IAAIG,CAAJ,CAAb,IAAuB,CAAC,CAA5B,EAA+B,MAAM,IAAIR,KAAJ,CAAU,iDAAV,CAAN;AAC/ByI,YAAK/B,IAAL,CAAUrG,IAAIG,CAAJ,CAAV;;AAFmC,+BAGN0G,gBAAgBtG,KAAKJ,CAAL,CAAhB,EAAyBH,IAAIG,CAAJ,CAAzB,EAAiCiI,IAAjC,CAHM;AAAA;AAAA,WAG9BC,YAH8B;AAAA,WAGhBvB,MAHgB;;AAInC,WAAIuB,YAAJ,EAAkB;AAChB;AACA9H,cAAKJ,CAAL,IAAU2G,MAAV;AACAzE,mBAAU,IAAV;AACD;AACD;AACA,WAAI,CAACjC,OAAO6E,IAAP,CAAY1E,KAAKJ,CAAL,CAAZ,EAAqBoB,MAA1B,EAAkC;AAChC,gBAAOhB,KAAKJ,CAAL,CAAP;AACD;AACF,MAbD,MAcK,IAAIH,IAAIG,CAAJ,MAAW,IAAf,EAAqB;AACxB,cAAOI,KAAKJ,CAAL,CAAP;AACAkC,iBAAU,IAAV;AACD,MAHI,MAIA,IAAI9B,KAAKJ,CAAL,MAAYH,IAAIG,CAAJ,CAAhB,EAAwB;AAC3BI,YAAKJ,CAAL,IAAUH,IAAIG,CAAJ,CAAV;AACAkC,iBAAU,IAAV;AACD;AACF;;AAED,OAAIA,OAAJ,EAAa9B,OAAO,mBAAO,EAAP,EAAWA,IAAX,CAAP;;AAEb,UAAO,CAAC8B,OAAD,EAAU9B,IAAV,CAAP;AACD;;AAED,UAAS2G,UAAT,CAAoBlH,GAApB,EAAyB;AACvB,OAAIZ,MAAMkJ,OAAN,CAActI,GAAd,CAAJ,EAAwB,OAAOA,IAAI8B,GAAJ,CAAQoF,UAAR,CAAP;AACxB,OAAI,CAACG,MAAMrH,GAAN,CAAL,EAAiB,OAAOA,GAAP;;AAEjB,OAAIwD,SAAS,EAAb;;AAEA,QAAK,IAAIrD,CAAT,IAAcH,GAAd,EAAmB;AACjB,SAAI,CAACA,IAAI8D,cAAJ,CAAmB3D,CAAnB,CAAL,EAA4B;AAC5BqD,YAAOrD,CAAP,IAAY+G,WAAWlH,IAAIG,CAAJ,CAAX,CAAZ;AACD;;AAED,UAAOC,OAAOmI,MAAP,CAAc/E,MAAd,CAAP;AACD;;AAED,UAAS6D,KAAT,CAAerH,GAAf,EAAoB;AAClB,UAAOI,OAAOnB,SAAP,CAAiB+F,QAAjB,CAA0B1F,IAA1B,CAA+BU,GAA/B,KAAuC,iBAA9C;AACD,E;;;;;;AChWD;;;;;SAoCgBwI,e,GAAAA,e;SAmBAC,gB,GAAAA,gB;AArDhB,UAASC,UAAT,CAAoBnE,GAApB,EAAyB;AACvB,OAAI,CAACP,OAAO2E,cAAZ,EAA4B,OAAO,IAAP;AAC5B,OAAI;AACF,YAAOC,KAAKC,KAAL,CAAW7E,OAAO2E,cAAP,CAAsBlE,OAAtB,CAA8BF,GAA9B,CAAX,CAAP;AACD,IAFD,CAEE,OAAOuE,CAAP,EAAU;AACV9E,YAAO2E,cAAP,CAAsBI,UAAtB,CAAiCxE,GAAjC;AACA,YAAO,IAAP;AACD;AAEF;AACD,UAASyE,UAAT,CAAoBzE,GAApB,EAAyB3D,KAAzB,EAAgC;AAC9B,OAAI,CAACoD,OAAO2E,cAAZ,EAA4B;;AAE5B3E,UAAO2E,cAAP,CAAsB/D,OAAtB,CAA8BL,GAA9B,EAAmCqE,KAAKK,SAAL,CAAerI,KAAf,CAAnC;AACD;;AAEM,KAAMsI,sCAAe;AAC1BzE,YAASiE,UADiB;AAE1B9D,YAASoE;AAFiB,EAArB;;AAKP,UAASG,aAAT,CAAuB5E,GAAvB,EAA4B;AAC1B,OAAI,CAACP,OAAOoF,YAAZ,EAA0B,OAAO,IAAP;;AAE1B,UAAOR,KAAKC,KAAL,CAAW7E,OAAOoF,YAAP,CAAoB3E,OAApB,CAA4BF,GAA5B,CAAX,CAAP;AACD;AACD,UAAS8E,aAAT,CAAuB9E,GAAvB,EAA4B3D,KAA5B,EAAmC;AACjC,OAAI,CAACoD,OAAOoF,YAAZ,EAA0B;;AAE1BpF,UAAOoF,YAAP,CAAoBxE,OAApB,CAA4BL,GAA5B,EAAiCqE,KAAKK,SAAL,CAAerI,KAAf,CAAjC;AACD;;AAED,KAAI0I,iBAAiB,IAAIC,GAAJ,EAArB;;AAEO,UAASf,eAAT,CAAyBjE,GAAzB,EAA8BmB,QAA9B,EAAwC;AAC7C,OAAI1B,OAAOoF,YAAX,EAAyB;AACvB;AACA,SAAII,gBAAgB,SAAhBA,aAAgB,IAAK;AACvB,WAAIV,EAAEvE,GAAF,KAAU,IAAV,IAAkBuE,EAAEvE,GAAF,KAAUA,GAAhC,EAAqC;AACnCmB,kBAASyD,cAAc5E,GAAd,CAAT;AACD;AACF,MAJD;;AAMA;AACA,SAAIvE,MAAM,EAAV;AACAA,SAAIuE,GAAJ,IAAWiF,aAAX;AACAF,oBAAeG,GAAf,CAAmB/D,QAAnB,EAA6B1F,GAA7B;;AAEA;AACAgE,YAAO0F,gBAAP,CAAwB,SAAxB,EAAmCF,aAAnC;AACD;AACF;AACD;AACO,UAASf,gBAAT,CAA0BlE,GAA1B,EAA+BmB,QAA/B,EAAyC;AAC9C,OAAIiE,iBAAiBL,eAAeM,GAAf,CAAmBlE,QAAnB,CAArB;AACA,OAAIiE,eAAepF,GAAf,CAAJ,EAAyB;AACvB;AACAP,YAAO6F,mBAAP,CAA2B,SAA3B,EAAsCF,eAAepF,GAAf,CAAtC;AACD;AACF;;AAEM,KAAMuF,4CAAkB;AAC7BrF,YAAS0E,aADoB;AAE7BvE,YAASyE;AAFoB,EAAxB,C;;;;;;AC/DP;;;;;SAKgBU,e,GAAAA,e;;AAHhB;;AACA;;AAEO,UAASA,eAAT,CAAyBrL,KAAzB,EAAgC;;AAErC,UAAO,UAACsL,eAAD,EAAkBC,kBAAlB,EAAsCC,UAAtC;AAAA,YAAqD,qBAAa;;AAEvE;AACA,WAAI,CAACD,kBAAL,EAAyBA,qBAAqB;AAAA,gBAAa,EAACxL,kBAAD,EAAb;AAAA,QAArB;AACzB,WAAI,CAACyL,UAAL,EAAiBA,aAAa,oBAACC,CAAD,EAAIC,CAAJ,EAAOC,CAAP;AAAA,gBAAa,mBAAO,EAAP,EAAWF,CAAX,EAAcC,CAAd,EAAiBC,CAAjB,CAAb;AAAA,QAAb;;AAEjB,WAAI,OAAOzK,SAAP,IAAoB,UAAxB,EAAoC;AAClCA,qBAAY,yBAAY;AACtB1C,mBAAQ0C;AADc,UAAZ,CAAZ;AAGD;;AAED,WAAI0K,QAAQC,kBAAkB3K,SAAlB,CAAZ;AACA;AACA,WAAI4K,oBAAJ;AACA,WAAIC,UAAU,SAAVA,OAAU,CAAC7I,KAAD,EAAW;AACvB;AACA,aAAI8I,YAAY,CAAC,CAACF,WAAlB;AACA,aAAInI,UAAU,IAAd;AACA,aAAIsI,aAAaX,mBAAmBA,gBAAgBtL,OAAhB,EAAyBkD,KAAzB,CAApC;AACA,aAAIxC,MAAMkJ,OAAN,CAAcqC,UAAd,CAAJ,EAA+B;AAC7BtI,qBAAUsI,WAAW,CAAX,CAAV;AACAA,wBAAaA,WAAW,CAAX,CAAb;AACD;AACD,aAAIC,gBAAgBX,mBAAmBvL,KAAnB,EAA0BkD,KAA1B,CAApB;;AAEA,aAAIiJ,cAAcX,WAAWtI,KAAX,EAAkB+I,UAAlB,EAA8BC,aAA9B,CAAlB;AACA,aAAI,CAACvD,MAAMwD,WAAN,CAAL,EAAyB,MAAM,IAAIlL,KAAJ,CAAU,wCAAV,CAAN;AACzB6K,uBAAcK,WAAd;AACA,gBAAOxI,WAAW,CAACqI,SAAnB;AACD,QAfD;;AAiBA;AACA,WAAII,sBAAJ;AACAlL,iBAAUX,SAAV,CAAoB8L,kBAApB,GAAyC,YAAY;AACnD,aAAIf,eAAJ,EAAqB;AACnB;AACA,eAAIc,aAAJ,EAAmBpM,MAAMkH,WAAN,CAAkBkF,aAAlB;;AAEnB;AACAA,2BAAgB,YAAY;AAC1B,iBAAIzI,UAAUoI,QAAQ,KAAK7I,KAAb,CAAd;AACA;AACA,iBAAIS,OAAJ,EAAa;AACX,oBAAKT,KAAL,GAAa4I,WAAb;AACA,oBAAK3E,WAAL;AACD;AACF,YAPe,CAOdmF,IAPc,CAOT,IAPS,CAAhB;AAQAtM,iBAAMiG,SAAN,CAAgBmG,aAAhB;AACD;;AAED,aAAI,CAACN,WAAL,EAAkBC,QAAQ,KAAK7I,KAAb;AAClB,cAAKA,KAAL,GAAa4I,WAAb;AACA,gBAAOF,MAAMS,kBAAN,IAA4BT,MAAMS,kBAAN,CAAyBrL,KAAzB,CAA+B,IAA/B,EAAqCH,SAArC,CAAnC;AACD,QApBD;;AAsBA;AACAK,iBAAUX,SAAV,CAAoBgM,oBAApB,GAA2C,UAAUC,SAAV,EAAqB;AAC9D;AACAJ,0BAAiBpM,MAAMkH,WAAN,CAAkBkF,aAAlB,CAAjB;AACAA,yBAAgB,IAAhB;;AAEA,gBAAOR,MAAMW,oBAAN,IAA8BX,MAAMW,oBAAN,CAA2B3L,IAA3B,CAAgC,IAAhC,EAAsC4L,SAAtC,CAArC;AACD,QAND;;AAQA;AACAtL,iBAAUX,SAAV,CAAoBkM,yBAApB,GAAgD,UAAUD,SAAV,EAAqB;AACnE;AACA,gBAAOZ,MAAMa,yBAAN,IAAmCb,MAAMa,yBAAN,CAAgC7L,IAAhC,CAAqC,IAArC,EAA2CkL,WAA3C,CAA1C;AACD,QAHD;;AAKA;AACA5K,iBAAUX,SAAV,CAAoB/B,MAApB,GAA6B,UAAUgO,SAAV,EAAqBxJ,KAArB,EAA4B0J,OAA5B,EAAqC;AAChE,aAAI,CAACZ,WAAL,EAAkBC,QAAQ,KAAK7I,KAAb;;AAElB;AACA,cAAKA,KAAL,GAAa4I,WAAb;AACA,gBAAOF,MAAMpN,MAAN,IAAgBoN,MAAMpN,MAAN,CAAaoC,IAAb,CAAkB,IAAlB,EAAwB,KAAKsC,KAA7B,EAAoCF,KAApC,EAA2C0J,OAA3C,CAAvB;AACD,QAND;;AAQA,cAAOxL,SAAP;AACD,MAjFM;AAAA,IAAP;AAkFD;;AAED,UAAS2K,iBAAT,CAA2B3K,SAA3B,EAAsC;AACpC,UAAO,mBAAO,EAAP,EAAWA,UAAU1C,MAAV,GAAmB0C,SAAnB,GAA+BA,UAAUX,SAApD,CAAP;AACD;;AAED,UAASoI,KAAT,CAAegE,GAAf,EAAoB;AAClB,UAAOjL,OAAOnB,SAAP,CAAiB+F,QAAjB,CAA0B1F,IAA1B,CAA+B+L,GAA/B,KAAuC,iBAA9C;AACD,E;;;;;;ACjGD;;;;;;SA8CgBxM,I,GAAAA,I;;AA3ChB;;AACA;;AACA;;AACA;;AACA;;AAEA,KAAMX,WAAW,SAAXA,QAAW;AAAA,UAAO,kBAAM,uBAAgBC,GAAhB,CAAN,CAAP;AAAA,EAAjB;;AAEO,KAAMS,0BAAS,yBAAY;AAChC0M,kBADgC,6BACd;AAChB,YAAO;AACLnN,YAAK;AADA,MAAP;AAGD,IAL+B;AAMhCoN,oBANgC,+BAMZ;AAAA;;AAClB,UAAKC,YAAL,GAAoB,iBAAS;AAC3B,WAAI9J,MAAMvD,GAAN,KAAc,MAAKuD,KAAL,CAAWvD,GAA7B,EAAkC;AAChC,eAAKsN,QAAL,CAAc,EAACtN,KAAKuD,MAAMvD,GAAZ,EAAd;AACD;AACF,MAJD;AAKA,kBAAMwG,SAAN,CAAgB,KAAK6G,YAArB;AACD,IAb+B;AAchCP,uBAdgC,kCAcT;AACrB,kBAAMrF,WAAN,CAAkB,KAAK4F,YAAvB;AACD,IAhB+B;AAiBhCL,4BAjBgC,qCAiBND,SAjBM,EAiBK;AACnC,SAAIA,UAAUQ,MAAV,KAAqB,KAAKA,MAA9B,EAAsC;AACpC,YAAKC,YAAL,CAAkBT,UAAUQ,MAA5B;AACD;AACF,IArB+B;AAsBhCC,eAtBgC,wBAsBnBD,MAtBmB,EAsBX;AAAA;;AACnB,UAAKA,MAAL,GAAcA,UAAU,KAAK9J,KAAL,CAAW8J,MAAnC;AACA,UAAKE,MAAL,GAAc,0BAAa,KAAKF,MAAlB,EAA0B,YAAM;AAC5C;AACA,cAAK7F,WAAL;AACD,MAHa,CAAd;AAID,IA5B+B;AA6BhC3I,SA7BgC,kBA6BzB0E,KA7ByB,EA6BlB;AACZ,SAAI,CAAC,KAAKgK,MAAV,EAAkB,KAAKD,YAAL;AAClB,YAAO,KAAKC,MAAL,CAAY7I,QAAZ,EAAsBnB,KAAtB,CAAP;AACD;AAhC+B,EAAZ,CAAf;;AAmCA,UAAS/C,IAAT,CAAc+C,KAAd,EAAqB;AAAA,OACrBiK,EADqB,GACkBjK,KADlB,CACrBiK,EADqB;AAAA,OACjBvN,OADiB,GACkBsD,KADlB,CACjBtD,OADiB;AAAA,4BACkBsD,KADlB,CACRkK,WADQ;AAAA,OACRA,WADQ,sCACM,QADN;;;AAG1B,UAAO,eAAE,MAAF,EAAU,mBAAO;AACtBC,cAAS;AAAA,cAAM7N,SAAS2N,EAAT,EAAavN,OAAb,CAAN;AAAA;AADa,IAAP,EAEdsD,KAFc,EAEP;AACRiK,SAAIpI,SADI;AAERnF,cAASmF,SAFD;AAGRqI,kBAAarI,SAHL;AAIRuI,gBAAW,eACTjJ,SAASM,QAAT,IAAqBwI,GAAG7G,QAAH,GAAchC,OAAd,CAAsB,WAAtB,EAAmC,EAAnC,IAAyC,CAAC,CAA/D,IAAoE8I,WAD3D,EAETlK,MAAMoK,SAFG;AAJH,IAFO,CAAV,CAAP;AAWD,E;;;;;;AC5DD;;;;;SAYgBC,Y,GAAAA,Y;;AAVhB;;AACA;;AACA;;AACA;;AACA;;AAEA,KAAM/N,WAAW,SAAXA,QAAW,CAACC,GAAD,EAAM+N,IAAN;AAAA,UAAe,kBAAM,uBAAgB/N,GAAhB,EAAqB+N,IAArB,CAAN,CAAf;AAAA,EAAjB;;AAEA,KAAIN,SAAS,IAAb;;AAEO,UAASK,YAAT,CAAsBP,MAAtB,EAA8BS,aAA9B,EAA6C;AAClD,OAAI,CAACT,MAAL,EAAa;AACX,uBAAW,MAAM,IAAI/L,KAAJ,CAAU,kCAAV,CAAN;AACX,YAAO;AAAA,cAAM,IAAN;AAAA,MAAP;AACD;;AAED+L,YAAStM,MAAMkJ,OAAN,CAAcoD,MAAd,IAAwBA,MAAxB,GAAiC,CAACA,MAAD,CAA1C;;AAEA,OAAIE,MAAJ,EAAYA,OAAOtF,OAAP;;AAEZsF,YAAS,IAAIhN,MAAJ,CAAW8M,MAAX,EAAmBS,aAAnB,CAAT;;AAEA,UAAO,UAAUpJ,QAAV,EAAoBnB,KAApB,EAA2B;AAChC,YAAOgK,OAAOQ,YAAP,CAAoBrJ,QAApB,EAA8BnB,KAA9B,CAAP;AACD,IAFD;AAGD;;AAGD,UAAShD,MAAT,CAAgB8M,MAAhB,EAAwBS,aAAxB,EAAuC;AAAA;;AACrC,QAAKE,YAAL,GAAoB,IAApB;AACA,QAAKC,YAAL,GAAoB,IAApB;;AAEA,QAAKH,aAAL,GAAqBA,aAArB;;AAEA,QAAKT,MAAL,GAAcA,OAAO5J,GAAP,CAAW,iBAAS;AAChC,SAAIyK,WAAW,IAAIC,KAAJ,QAAgBC,KAAhB,EAAuB,MAAKN,aAA5B,CAAf;AACA;AACA,SAAIO,QAAQD,MAAMpI,IAAd,KAAuB,GAAvB,IAA8BoI,MAAME,OAAxC,EAAiD;AAC/C,WAAI,CAAC,MAAKN,YAAV,EAAwB;AACtB,eAAKA,YAAL,GAAoBE,QAApB;AACD,QAFD,MAGK,kBAAW;AACd,eAAM,IAAI5M,KAAJ,CAAU,sCAAV,CAAN;AACD;AACF;AACD,YAAO4M,QAAP;AACD,IAZa,CAAd;AAaD;;AAED3N,QAAOK,SAAP,CAAiBqH,OAAjB,GAA2B,YAAY;AACrC,QAAKsG,SAAL,GAAiB,IAAjB;AACA,QAAKlB,MAAL,CAAYzK,OAAZ,CAAoB;AAAA,YAASwL,MAAMnG,OAAN,EAAT;AAAA,IAApB;AACD,EAHD;;AAKA1H,QAAOK,SAAP,CAAiB4N,SAAjB,GAA6B,YAAY;AACvC,UAAO,IAAP;AACD,EAFD;;AAIAjO,QAAOK,SAAP,CAAiBmN,YAAjB,GAAgC,UAAUrJ,QAAV,EAAoBnB,KAApB,EAA2B;AAAA;;AACzD;AACA,OAAIkL,eAAeC,WAAW,KAAKrB,MAAhB,EAAwB3I,QAAxB,CAAnB;;AAEA,OAAI,KAAKuJ,YAAT,EAAuB;AACrB,UAAKA,YAAL,CAAkBU,OAAlB;AACA,UAAKV,YAAL,GAAoB,IAApB;AACD;;AAED,OAAIQ,YAAJ,EAAkB;AAChB,UAAKR,YAAL,GAAoBQ,YAApB;AACA,YAAO,KAAKR,YAAL,CAAkBW,KAAlB,CAAwBlK,QAAxB,EAAkCnB,KAAlC,EAAyC;AAAA,cAAM,CAAC,OAAKgL,SAAN,IAAmB,OAAKT,aAAL,EAAzB;AAAA,MAAzC,CAAP;AACD,IAHD,MAIK,IAAI,KAAKE,YAAT,EAAuB;AAC1B;AACA,YAAO,KAAKA,YAAL,CAAkBY,KAAlB,CAAwBlK,QAAxB,EAAkCnB,KAAlC,EAAyC;AAAA,cAAM,CAAC,OAAKgL,SAAN,IAAmB,OAAKT,aAAL,EAAzB;AAAA,MAAzC,CAAP;AACD;;AAED,qBAAWe,QAAQC,IAAR,CAAa,uDAAb;AACX,UAAO,IAAP;AACD,EApBD;;AAuBA,UAASX,KAAT,CAAe9F,MAAf,EAAuB+F,KAAvB,EAA8BN,aAA9B,EAA6C;AAAA;;AAC3C,qBAAW;AACT,SAAI,CAACM,KAAL,EAAY,MAAM,IAAI9M,KAAJ,CAAU,eAAV,CAAN;AACZ,SAAI8M,MAAM7M,SAAN,IAAmB6M,MAAMW,cAAzB,IAA4C,CAACX,MAAM7M,SAAP,IAAoB,CAAC6M,MAAMW,cAA3E,EAA4F;AAC1F,aAAM,IAAIzN,KAAJ,CAAU,yCAAV,CAAN;AACD;AACD,SAAI8M,MAAMY,OAAN,IAAiBZ,MAAMa,YAA3B,EAAyC,MAAM,IAAI3N,KAAJ,CAAU,8CAAV,CAAN;AAC1C;;AAED;AACA,QAAK8M,KAAL,GAAaA,KAAb;AACA,QAAK/F,MAAL,GAAcA,MAAd;AACA,QAAKyF,aAAL,GAAqBA,aAArB;AACA,QAAKoB,aAAL,GAAqBd,MAAM7M,SAA3B;AACA,QAAKyM,YAAL,GAAoB,IAApB;;AAGA;AACA,QAAKmB,YAAL,GAAoB,EAAEf,MAAMpI,IAAN,YAAsBoJ,MAAxB,CAApB;AACA,QAAKpJ,IAAL,GAAY,KAAKmJ,YAAL,GAAoBd,QAAQD,MAAMpI,IAAN,IAAcoI,MAAMiB,UAA5B,CAApB,GAA8D,EAA1E;AACA,QAAKC,OAAL,GAAejH,OAAOrC,IAAP,IAAe,GAA9B;AACA,QAAKqJ,UAAL,GAAkBjB,MAAMiB,UAAN,IAAsBhH,OAAOrC,IAAP,IAAe,GAAf,GAAqB,EAArB,GAA0BqC,OAAOrC,IAAvD,UAA+DoI,MAAMiB,UAAN,CAAiB1K,OAAjB,CAAyB,KAAzB,EAAgC,EAAhC,CAA/D,GAAuG,EAAzH;AACA,QAAK4K,UAAL,GAAkB,EAAlB;AACA,QAAKC,WAAL;;AAEA;AACA,QAAKC,OAAL,GAAe,KAAf;AACA,QAAKC,SAAL,GAAiB,KAAjB;AACA,QAAKC,OAAL,GAAe,KAAf;AACA,QAAKC,YAAL,GAAoB,CAApB;AACA,QAAKC,MAAL,GAAc,EAAd;;AAEA,OAAIzB,MAAM0B,QAAN,IAAkB1B,MAAM0B,QAAN,CAAe5M,MAArC,EAA6C;AAC3C,UAAK4M,QAAL,GAAgB1B,MAAM0B,QAAN,CAAerM,GAAf,CAAmB,iBAAS;AAC1C,WAAIyK,WAAW,IAAIC,KAAJ,SAAgB4B,KAAhB,EAAuBjC,aAAvB,CAAf;AACA;AACA,WAAIO,QAAQH,SAASlI,IAAjB,KAA0B,GAA1B,IAAiC+J,MAAMzB,OAA3C,EAAoD;AAClD,aAAI,CAAC,OAAKN,YAAV,EAAwB;AACtB,kBAAKA,YAAL,GAAoBE,QAApB;AACD,UAFD,MAGK,kBAAW;AACd,iBAAM,IAAI5M,KAAJ,CAAU,sCAAV,CAAN;AACD;AACF;;AAED,cAAO4M,QAAP;AACD,MAbe,CAAhB;AAcD;AACF;;AAEDC,OAAMvN,SAAN,CAAgBqH,OAAhB,GAA0B,YAAY;AACpC,QAAKsG,SAAL,GAAiB,IAAjB;AACA,QAAKuB,QAAL,IAAiB,KAAKA,QAAL,CAAclN,OAAd,CAAsB;AAAA,YAASmN,MAAM9H,OAAN,EAAT;AAAA,IAAtB,CAAjB;;AAEA,OAAI,KAAKwH,OAAT,EAAkB,KAAKd,OAAL;AACnB,EALD;;AAOAR,OAAMvN,SAAN,CAAgBgO,KAAhB,GAAwB,UAAUlK,QAAV,EAAoBnB,KAApB,EAA2B;AAAA;;AACjD;AACA,OAAI,KAAK8L,UAAL,IAAmB3K,SAASM,QAAT,KAAsB,KAAKqK,UAAlD,EAA8D;AAC5D;AACAxP,cAAS,KAAKwP,UAAd,EAA0B,EAAC1K,SAAS,IAAV,EAAgBqL,cAAc,IAA9B,EAAoCC,eAAe,IAAnD,EAA1B;AACA,YAAO,IAAP;AACD;;AAED,OAAI,KAAKN,OAAL,IAAgB,KAAKD,SAAzB,EAAoC;AAClC,SAAI,CAAC,IAAIQ,IAAJ,EAAD,GAAY,KAAKN,YAAjB,GAAgC,EAApC,EAAwC,OAAO,KAAKpB,SAAL,EAAP;AACxC,YAAO,IAAP;AACD;;AAED,OAAIhC,cAAc,mBAAO,EAAP,EAAW,KAAKqD,MAAhB,EAAwBtM,KAAxB,CAAlB;;AAEA;AACA,OAAI,CAAC,KAAKkM,OAAN,KAAkB,KAAKrB,KAAL,CAAWY,OAAX,IAAsB,KAAKZ,KAAL,CAAWa,YAAnD,CAAJ,EAAsE;AACpE,SAAIkB,WAAW,KAAf;;AAEA,SAAI,KAAK/B,KAAL,CAAWY,OAAf,EAAwB;AACtB,YAAKZ,KAAL,CAAWY,OAAX,CAAmB,UAAClD,CAAD,EAAIC,CAAJ,EAAU;AAC3BoE,oBAAW,IAAX;AACA,gBAAKxB,OAAL;AACA9O,kBAASiM,CAAT,EAAYC,CAAZ;AACD,QAJD,EAIGS,WAJH;AAKD,MAND,MAOK;AAAA;AACH,gBAAKkD,SAAL,GAAiB,IAAjB;AACA,gBAAKE,YAAL,GAAoB,CAAC,IAAIM,IAAJ,EAArB;AACA,aAAIE,OAAO,SAAPA,IAAO,MAAO;AAChB,eAAI,OAAKX,OAAT,EAAkB;AAChB,oBAAKC,SAAL,GAAiB,KAAjB;AACA,iBAAIW,GAAJ,EAAS,OAAO,OAAK1B,OAAL,EAAP;AACT,oBAAKb,aAAL;AACD;AACF,UAND;AAOA,yCAAa,YAAM;AACjB,kBAAKM,KAAL,CAAWa,YAAX,CAAwBmB,IAAxB,EAA8B,UAACtE,CAAD,EAAIC,CAAJ,EAAU;AACtCqE,kBAAK,IAAL;AACAvQ,sBAASiM,CAAT,EAAYC,CAAZ;AACD,YAHD,EAGGS,WAHH;AAID,UALD;AAVG;AAgBJ;;AAED,SAAI2D,QAAJ,EAAc,OAAO,IAAP;AACf;;AAED;AACA,OAAI,CAAC,KAAKjB,aAAV,EAAyB;AACvB,UAAKS,OAAL,GAAe,IAAf;AACA,UAAKC,YAAL,GAAoB,CAAC,IAAIM,IAAJ,EAArB;AACA,UAAK9B,KAAL,CAAWW,cAAX,CAA0B,0BAAkB;AAC1C,WAAI,CAACuB,cAAD,gBAAJ,EAA8B,MAAM,IAAIhP,KAAJ,CAAU,mEAAV,CAAN;AAC9B,cAAKqO,OAAL,GAAe,KAAf;AACA,cAAKT,aAAL,GAAqBoB,cAArB;AACA,cAAKb,OAAL,IAAgB,OAAK3B,aAAL,EAAhB;AACD,MALD;AAMD;;AAED,QAAK2B,OAAL,GAAe,IAAf;;AAEA,OAAI,KAAKP,aAAL,IAAsB,CAAC,KAAKS,OAA5B,IAAuC,CAAC,KAAKD,SAAjD,EAA4D;AAC1D,UAAKE,YAAL,GAAoB,CAApB;AACA,YAAO,eAAE,KAAKV,aAAP,EAAsB1C,WAAtB,EAAmC,KAAKyB,YAAL,IAAqB,KAAKA,YAAL,CAAkBW,KAAlB,CAAwBlK,QAAxB,CAAxD,CAAP;AACD;;AAED,QAAK6L,YAAL,GAAoB1K,WAAW,YAAM;AACnC,SAAI,OAAK8J,OAAL,IAAgB,OAAKD,SAAzB,EAAoC,OAAK5B,aAAL;AACrC,IAFmB,EAEjB,EAFiB,CAApB;;AAIA,UAAO,IAAP;AACD,EAvED;;AAyEAK,OAAMvN,SAAN,CAAgB+N,OAAhB,GAA0B,YAAY;AACpC,OAAI6B,aAAa,KAAKf,OAAtB;AACA;AACA,QAAKA,OAAL,GAAe,KAAf;AACA,QAAKC,SAAL,GAAiB,KAAjB;AACA,QAAKC,OAAL,GAAe,KAAf;AACA,QAAKC,YAAL,GAAoB,CAApB;AACA9J,gBAAa,KAAKyK,YAAlB;AACAC,iBAAc,KAAKpC,KAAL,CAAWqC,OAAzB,IAAoC,KAAKrC,KAAL,CAAWqC,OAAX,CAAmB5Q,QAAnB,CAApC;AACD,EATD;;AAWAsO,OAAMvN,SAAN,CAAgB8P,KAAhB,GAAwB,UAAUhM,QAAV,EAAoB;AAAA;;AAC1C,OAAI,KAAK6J,SAAL,IAAkB,CAAC,KAAKoC,OAA5B,EAAqC,OAAO,KAAP;;AAErC;AACA,OAAI3L,WAAW4L,YAAYlM,SAASM,QAArB,EAA+B,KAAKsK,OAApC,CAAf;AACA,OAAI,CAACtK,QAAL,EAAe;AACb;AACA,YAAO,KAAP;AACD;;AAED,OAAI0L,QAAQ,KAAKC,OAAL,CAAaE,IAAb,CAAkB7L,QAAlB,CAAZ;AACA,OAAI8L,WAAW,CAAC,KAAKC,aAAN,IAAuB,KAAKA,aAAL,CAAmBC,IAAnB,CAAwBhM,QAAxB,CAAtC;AACA;AACA,OAAI,CAAC0L,KAAL,EAAY,OAAO,KAAP;;AAEZ,OAAI,KAAKZ,QAAT,EAAmB;AACjB,SAAI7B,eAAe,KAAKgD,aAAL,CAAmBvM,QAAnB,CAAnB;;AAEA,SAAIuJ,YAAJ,EAAkB;AAChB;AACA,WAAI,KAAKA,YAAL,IAAqB,KAAKA,YAAL,KAAsBA,YAA/C,EAA6D;AAC3D,cAAKA,YAAL,CAAkBU,OAAlB;AACD;AACD,YAAKV,YAAL,GAAoBA,YAApB;AACD,MAND,MAOK,IAAI6C,YAAY,KAAK9C,YAArB,EAAmC;AACtC;AACA,YAAKC,YAAL,GAAoB,KAAKD,YAAzB;AACA,cAAO,IAAP;AACD,MAJI,MAKA;AACH;AACA,cAAO,KAAP;AACD;AACF,IAnBD,MAoBK,IAAI,CAAC8C,QAAL,EAAe;AAClB;AACA;AACA,YAAO,KAAP;AACD;;AAED,OAAIjB,SAAS,KAAKA,MAAL,GAAc,EAA3B;AACA;AACA,OAAIa,MAAMxN,MAAN,GAAe,CAAnB,EAAsB;AACpB,SAAI,KAAKiM,YAAT,EAAuB;AACrBuB,aACG1P,KADH,CACS,CADT,EAEG4B,OAFH,CAEW,UAACL,KAAD,EAAQvC,KAAR,EAAkB;AACzB,aAAI,OAAKuP,UAAL,CAAgBvP,KAAhB,CAAJ,EAA4B6P,OAAO,OAAKN,UAAL,CAAgBvP,KAAhB,CAAP,IAAiCuC,KAAjC;AAC7B,QAJH;AAKD,MAND,MAOK;AACHsN,cAAOA,MAAP,GAAgBa,MAAM1P,KAAN,CAAY,CAAZ,CAAhB;AACD;AACF;;AAED,UAAO,IAAP;AACD,EAzDD;;AA2DAmN,OAAMvN,SAAN,CAAgB4N,SAAhB,GAA4B,YAAY;AACtC,UAAO,KAAKJ,KAAL,CAAW8C,MAAX,KAAsB,IAAtB,GAA6B,IAA7B,GAAoC,KAAK9C,KAAL,CAAW8C,MAAX,IAAqB,eAAE,KAAK9C,KAAL,CAAW8C,MAAb,CAArB,IAA6C,KAAK7I,MAAL,CAAYmG,SAAZ,EAAxF;AACD,EAFD;;AAIAL,OAAMvN,SAAN,CAAgBqQ,aAAhB,GAAgC,UAAUvM,QAAV,EAAoB;AAClD,OAAI,CAAC,KAAKoL,QAAV,EAAoB;;AAEpB,UAAOpB,WAAW,KAAKoB,QAAhB,EAA0BpL,QAA1B,CAAP;AACD,EAJD;;AAMAyJ,OAAMvN,SAAN,CAAgB4O,WAAhB,GAA8B,YAAY;AAAA;;AACxC,OAAI2B,cAAJ;;AAEA,OAAI,KAAKhC,YAAT,EAAuB;AACrB,SAAIiC,YAAY,KAAKpL,IAAL,CACbrB,OADa,CACL,gCADK,EAC6B,MAD7B,EAEbA,OAFa,CAEL,kBAFK,EAEe,UAAC+L,KAAD,EAAQW,EAAR,EAAe;AAC1C,cAAK9B,UAAL,CAAgBvH,IAAhB,CAAqBqJ,EAArB;AACA,WAAIC,aAAa,WAAjB;AACA,WAAIZ,MAAM7L,OAAN,CAAc,GAAd,MAAuB,CAA3B,EAA8ByM,aAAa,QAAQA,UAArB;;AAE9B,cAAOA,UAAP;AACD,MARa,EASb3M,OATa,CASL,KATK,EASE,IATF,CAAhB;AAUAwM,aAAQ,IAAI/B,MAAJ,CAAW,MAAMgC,SAAjB,CAAR;AACA,UAAKL,aAAL,GAAqB,IAAI3B,MAAJ,QAAe,KAAKE,OAAL,IAAgB,GAAhB,GAAsB,EAAtB,GAA2B,KAAKA,OAA/C,IAAyD8B,SAAzD,SAArB;AACD,IAbD,MAcK;AACHD,aAAQ,KAAK/C,KAAL,CAAWpI,IAAnB;AACD;AACD;AACA,QAAK2K,OAAL,GAAeQ,KAAf;AACA,UAAOA,KAAP;AACD,EAvBD;;AAyBA,UAASzC,UAAT,CAAoBrB,MAApB,EAA4B3I,QAA5B,EAAsCnB,KAAtC,EAA6C;AAC3C;AACA,OAAIkL,qBAAJ;AACApB,UAAOkE,IAAP,CAAY,iBAAS;AACnB,SAAIC,UAAUpD,MAAMsC,KAAN,CAAYhM,QAAZ,CAAd;;AAEA,SAAI8M,OAAJ,EAAa;AACX;AACA/C,sBAAeL,KAAf;AACA,cAAO,IAAP;AACD;AACD,YAAO,KAAP;AACD,IATD;;AAWA,UAAOK,YAAP;AACD;;AAED,UAASJ,OAAT,GAAmB;AACjB,OAAIoD,SAAS,EAAb;AACA,OAAIrP,IAAI,CAAR;AACA,UAAOA,IAAIlB,UAAUgC,MAArB,EAA6B;AAC3B,SAAIwO,OAAOxQ,UAAUkB,CAAV,KAAgB,EAA3B;AACAqP,YAAOzJ,IAAP,CAAY0J,KAAK/M,OAAL,CAAa,UAAb,EAAyB,EAAzB,CAAZ;AACAvC;AACD;;AAED,UAAO,MAAMqP,OAAOrN,MAAP,CAAc;AAAA,YAAK,CAAC,CAACvB,CAAP;AAAA,IAAd,EAAwBwB,IAAxB,CAA6B,GAA7B,CAAb;AACD;;AAED,UAASuM,WAAT,CAAqB5K,IAArB,EAA2BsJ,OAA3B,EAAoC;AAClCA,aAAUjB,QAAQiB,OAAR,CAAV;AACA,OAAIA,WAAW,GAAf,EAAoB,OAAOtJ,IAAP;AACpB,UAAOqI,QAAQrI,IAAR,EAAcrB,OAAd,CAAsB2K,OAAtB,EAA+B,EAA/B,CAAP;AACD,E;;;;;;AC/VD;;;;;SAmBgBqC,iB,GAAAA,iB;SA8CA9R,Q,GAAAA,Q;SAQAE,E,GAAAA,E;;AAvEhB;;AACA;;AACA;;AAEA,KAAM6R,6BAA6B,qCAAnC;;mBAEeD,iB;;AAEf;;;;;;;;;;AASO,UAASA,iBAAT,CAA2BtR,KAA3B,EAAkCwN,IAAlC,EAAwC;AAC7C,OAAIgE,UAAU,qBAAY;AACxBC,eAAU;AAAA,cAAOzR,MAAM,EAAC0H,MAAM6J,0BAAP,EAAmC3I,SAAS,EAACnJ,KAAKA,GAAN,EAA5C,EAAN,CAAP;AAAA;AADc,IAAZ,CAAd;;AAIA,UAAO,UAACuD,KAAD,EAAQ+D,MAAR,EAAmB;AACxB;AACA,SAAIA,OAAOW,IAAP,KAAgB6J,0BAApB,EAAgD;;AAFxB,SAInB9R,GAJmB,GAIZsH,OAAO6B,OAJK,CAInBnJ,GAJmB;;AAKxB,SAAIG,UAAU,mBAAO,EAAC8R,aAAa,IAAd,EAAP,EAA4BlE,IAA5B,EAAkCzG,OAAO6B,OAAzC,CAAd;;AAEA,SAAI,OAAOnJ,GAAP,IAAc,QAAlB,EAA4B;AAC1B+R,eAAQ9R,EAAR,CAAWD,GAAX,EAAgBG,OAAhB;AACD,MAFD,MAGK;AACHH,aAAMA,OAAO,EAAb;AACAA,aAAM,qBAASA,GAAT,CAAN;;AAEA,WAAIkS,YAAY;AACd9M,eAAMpF,IAAIoF,IAAJ,KAAajF,QAAQ+P,YAAR,GAAuBtL,SAASQ,IAAT,CAAcP,OAAd,CAAsB,IAAtB,EAA4B,EAA5B,CAAvB,GAAyDS,SAAtE,CADQ;AAEdJ,mBAAUlF,IAAIkF,QAFA;AAGdC,iBAAQnF,IAAImF,MAAJ,KAAehF,QAAQgQ,aAAR,GAAwBvL,SAASO,MAAT,CAAgBN,OAAhB,CAAwB,KAAxB,EAA+B,EAA/B,CAAxB,GAA6DS,SAA5E;AAHM,QAAhB;;AAMA,WAAI4M,UAAUhN,QAAV,KAAuBN,SAASM,QAAhC,IACCgN,UAAU/M,MAAV,KAAqBP,SAASO,MAD/B,IAEC+M,UAAU9M,IAAV,KAAmBR,SAASQ,IAFjC,EAEuC;AACrC;AACD;;AAED,WAAI+M,eAAe,uBAAOD,SAAP,CAAnB;;AAEAH,eAAQK,MAAR,CAAeD,YAAf,EAA6BhS,OAA7B;AACA,cAAO,EAACH,KAAKmS,YAAN,EAAP;AACD;AACF,IA/BD;AAgCD;;AAED;;;;;;;AAOO,UAASpS,QAAT,CAAkBC,GAAlB,EAAkC;AAAA,OAAX+N,IAAW,uEAAJ,EAAI;;AACvCA,QAAK/N,GAAL,GAAWA,GAAX;AACA,UAAO;AACLiI,WAAM6J,0BADD;AAEL3I,cAAS4E;AAFJ,IAAP;AAID;;AAEM,UAAS9N,EAAT,CAAYC,KAAZ,EAAiC;AAAA,OAAdC,OAAc,uEAAJ,EAAI;;AACtCD,WAAQmS,SAASnS,KAAT,CAAR;AACA;AACA,OAAIA,UAAUA,KAAd,EAAqB;;AAErBC,WAAQH,GAAR,GAAcE,KAAd;;AAEA,UAAO;AACL+H,WAAM6J,0BADD;AAEL3I,cAAShJ;AAFJ,IAAP;AAID,E;;;;;;ACpFD;;;;;SAEgBmS,O,GAAAA,O;AAAT,UAASA,OAAT,OAA6B;AAAA,OAAXN,QAAW,QAAXA,QAAW;;AAClC,OAAIA,QAAJ,EAAc;AACZnM,YAAO0F,gBAAP,CAAwB,UAAxB,EAAoC;AAAA,cAASyG,SAASO,MAAMhP,KAAf,CAAT;AAAA,MAApC,EAAoE,KAApE;AACD;;AAED,QAAKwO,OAAL,GAAelM,OAAOkM,OAAtB;AACD;;AAEDO,SAAQxR,SAAR,CAAkBsR,MAAlB,GAA2B,UAAUI,MAAV,EAAkBrS,OAAlB,EAA2B;AACpD,OAAIH,MAAM6F,OAAOkM,OAAP,CAAexO,KAAzB;;AAEA,OAAIvD,OAAOwS,WAAWxS,GAAlB,IAAyBG,QAAQ0E,OAArC,EAA8C;AAC5C,UAAKA,OAAL,CAAa2N,MAAb;AACD,IAFD,MAGK;AACH,UAAKtK,IAAL,CAAUsK,MAAV;AACD;;AAED;AACA,OAAIrS,QAAQ8R,WAAR,KAAwB,KAA5B,EAAmCpM,OAAO4M,MAAP,CAAc,CAAd,EAAiB,CAAjB;AACpC,EAZD;;AAcAH,SAAQxR,SAAR,CAAkBb,EAAlB,GAAuB,UAAUC,KAAV,EAAiBC,OAAjB,EAA0B;AAC/C,OAAI,CAAC0F,OAAOkM,OAAP,CAAexO,KAAhB,IAAyBpD,QAAQuS,UAAR,KAAuB,IAApD,EAA0D;;AAE1D,OAAI,KAAKX,OAAL,CAAa9R,EAAjB,EAAqB;AACnB,UAAK8R,OAAL,CAAa9R,EAAb,CAAgBC,KAAhB;AACD,IAFD,MAGK,IAAIA,QAAQ,CAAZ,EAAe;AAClB,UAAK6R,OAAL,CAAa3R,IAAb;AACD;AACF,EATD;;AAWAkS,SAAQxR,SAAR,CAAkBoH,IAAlB,GAAyB,UAAUlI,GAAV,EAAe;AACtC,OAAI,KAAK+R,OAAL,CAAaY,SAAjB,EAA4B;AAC1B;AACA,UAAKZ,OAAL,CAAaY,SAAb,CAAuB3S,GAAvB,EAA4B,IAA5B,EAAkCA,GAAlC;AACD,IAHD,MAIK;AACH;AACA6F,YAAOjB,QAAP,GAAkB5E,GAAlB;AACD;AACF,EATD;;AAWAsS,SAAQxR,SAAR,CAAkB+D,OAAlB,GAA4B,UAAU7E,GAAV,EAAe;AACzC,OAAI,KAAK+R,OAAL,CAAaa,YAAjB,EAA+B;AAC7B;AACA,UAAKb,OAAL,CAAaa,YAAb,CAA0B5S,GAA1B,EAA+B,IAA/B,EAAqCA,GAArC;AACD,IAHD,MAIK;AACH;AACA6F,YAAOjB,QAAP,CAAgBC,OAAhB,CAAwB7E,GAAxB;AACD;AACF,EATD,C;;;;;;AC9CA;;;;;SAEgB6S,M,GAAAA,M;AAAT,UAASA,MAAT,CAAgBC,MAAhB,EAAwB;AAC7B,UAAO,CACL,UADK,EAEL,MAFK,EAGL,UAHK,EAIL,MAJK,EAKL,UALK,EAML,QANK,EAOL,MAPK,EASJnP,GATI,CASA,eAAO;AACV,aAAQyC,GAAR;AACA,YAAK,UAAL;AACE,gBAAO0M,OAAOC,QAAP,GAAkBD,OAAOC,QAAP,GAAkB,KAApC,GAA4C,EAAnD;AACF,YAAK,MAAL;AACE,gBAAOD,OAAOE,IAAP,GAAcF,OAAOE,IAAP,GAAc,GAA5B,GAAkC,EAAzC;AACF,YAAK,MAAL;AACE,gBAAOF,OAAOG,IAAP,GAAc,MAAMH,OAAOG,IAA3B,GAAkC,EAAzC;AACF,YAAK,QAAL;AACE,gBAAOH,OAAO3N,MAAP,GAAgB,MAAM2N,OAAO3N,MAA7B,GAAsC,EAA7C;AACF,YAAK,MAAL;AACE,gBAAO2N,OAAO1N,IAAP,GAAc,MAAM0N,OAAO1N,IAA3B,GAAkC,EAAzC;AACF,YAAK,UAAL;AACE,gBAAO0N,OAAO1M,GAAP,KAAe,EAAtB;AACF,YAAK,UAAL;AACE,gBAAO,MAAM,CAAC0M,OAAO1M,GAAP,KAAe,EAAhB,EAAoBvB,OAApB,CAA4B,KAA5B,EAAmC,EAAnC,CAAb;AAdF;AAgBD,IA1BI,EA0BFN,IA1BE,CA0BG,EA1BH,CAAP;AA2BD,E","file":"trixion.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"trixion\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"trixion\"] = factory();\n\telse\n\t\troot[\"trixion\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a14047af2cded01613d3","/* globals __DEV__ */\n'use strict';\n\n//############ IMPORTS ############//\nimport {store, addReducer} from './store';\nimport {createConnector} from './reselect-connect';\n\nimport {Router, Link} from './routing';\nimport History, {navigate as navigateHistory, go as goHistory} from './store/history';\n\n\n//############ INITIALIZE ############//\n// store middlewares\naddReducer(History(store));\n\n// store connector\nconst connect = createConnector(store);\n\n// navigate action\nconst navigate = url => store(navigateHistory(url));\nconst go = (index, options) => store(goHistory(index), options);\nconst back = options => store(goHistory(-1, options));\n\n// namespace\nconst app = {};\n\n//############ EXPORTS ############//\n// preact\nexport {\n  DOM,\n  $,\n  createElement,\n  E,\n  Component,\n  createClass,\n  render,\n  findDOMNode,\n  unmountComponentAtNode,\n  h,\n  preact,\n  PropTypes\n} from './preact';\n// reselect\nexport {createSelector} from './reselect';\nexport {cl, DEBUG, parseUri, assign} from './utils';\nexport {setImmediate, clearImmediate} from '../polyfill/set-immediate';\n// store persistence\nexport {attachPersistence, attachSessionPersistence} from './store-persistence';\n// framework base\nexport {\n  // store\n  store as dispatch,\n  store,\n  addReducer,\n  // reselect\n  connect,\n  // routing\n  Router,\n  Link,\n  // navigation\n  navigate,\n  go,\n  back,\n  // global namespace\n  app\n};\n\nexport default module.exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/index.js","'use strict';\n\nimport * as preact from 'preact';\nlet {h, Component} = preact;\n\nlet componentPrototype = Component.prototype;\n\nlet wrapTag = tag => {\n  return function () {\n    let args = Array.prototype.slice.call(arguments);\n    args.unshift(tag);\n    return h.apply(null, args);\n  };\n};\n\nexport function $() {\n  if (!arguments[0]) throw new Error(\"Missing component declaration\");\n\n  if (typeof arguments[0].render == 'function' && (!arguments[0].prototype || !arguments[0].prototype.render)) {\n    arguments[0] = createClass(arguments[0]);\n  }\n\n  return h.apply(null, arguments);\n}\n\nexport function render(component, node, merge) {\n  return preact.render(component, node, merge || node.lastChild);\n}\n\nexport function createClass(obj) {\n\n  if (obj.__CREF__) return obj.__CREF__;\n\n  function F() {\n    Component.apply(this, arguments);\n  }\n\n  let p = F.prototype = Object.create(componentPrototype);\n  F.prototype.getDOMNode = function () {\n    return this.base;\n  };\n  F.prototype.isMounted = function () {\n    return !!this.base;\n  };\n  for (let i in obj) {\n    if ('getDefaultProps' == i) {\n      //noinspection JSUnfilteredForInLoop\n      F['defaultProps'] = obj[i]();\n    }\n    //noinspection JSUnfilteredForInLoop\n    p[i] = obj[i];\n  }\n\n  p.constructor = F;\n\n  Object.defineProperty(obj, '__CREF__', {\n    value: F,\n    writable: true\n  });\n\n  return F;\n}\n\nexport function unmountComponentAtNode(container) {\n  render(h(() => null), container);\n}\n\nexport function findDOMNode(component) {\n  return component.base || null;\n}\n\nlet PropTypes = {};\n\nlet predicates = 'array bool func number object string any arrayOf ' +\n  'element instanceOf node objectOf oneOf oneOf oneOfType shape';\n\npredicates\n  .split(' ')\n  .forEach(x => PropTypes[x] = ()=> ({}));\n\nexport {\n  Component,\n  h,\n  $ as createElement,\n  $ as E,\n  preact,\n  PropTypes\n};\n\nconst supportedTags = 'a abbr address area article aside audio b base bdi bdo big blockquote ' +\n  'body br button canvas caption cite code col colgroup data datalist dd del details dfn dialog ' +\n  'div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup ' +\n  'hr html i iframe img input ins kbd keygen label legend li link main map mark menu menuitem ' +\n  'meta meter nav noscript object ol optgroup option output p param picture pre progress q rp ' +\n  'rt ruby s samp script section select small source span strong style sub summary sup table ' +\n  'tbody td textarea tfoot th thead time title tr track u ul var video wbr';\n\n/**\n * @typedef {Function} tagConstructor\n * @param {Object|null} props\n * @param {...*} children\n */\n\n/**\n * @prop {tagConstructor} DOM.a(props, ...children)\n * @prop {tagConstructor} DOM.abbr(props, ...children)\n * @prop {tagConstructor} DOM.address(props, ...children)\n * @prop {tagConstructor} DOM.area(props, ...children)\n * @prop {tagConstructor} DOM.article(props, ...children)\n * @prop {tagConstructor} DOM.aside(props, ...children)\n * @prop {tagConstructor} DOM.audio(props, ...children)\n * @prop {tagConstructor} DOM.b(props, ...children)\n * @prop {tagConstructor} DOM.base(props, ...children)\n * @prop {tagConstructor} DOM.bdi(props, ...children)\n * @prop {tagConstructor} DOM.bdo(props, ...children)\n * @prop {tagConstructor} DOM.big(props, ...children)\n * @prop {tagConstructor} DOM.blockquote(props, ...children)\n * @prop {tagConstructor} DOM.body(props, ...children)\n * @prop {tagConstructor} DOM.br\n * @prop {tagConstructor} DOM.button(props, ...children)\n * @prop {tagConstructor} DOM.canvas(props, ...children)\n * @prop {tagConstructor} DOM.caption(props, ...children)\n * @prop {tagConstructor} DOM.cite(props, ...children)\n * @prop {tagConstructor} DOM.code(props, ...children)\n * @prop {tagConstructor} DOM.col(props, ...children)\n * @prop {tagConstructor} DOM.colgroup(props, ...children)\n * @prop {tagConstructor} DOM.data(props, ...children)\n * @prop {tagConstructor} DOM.datalist(props, ...children)\n * @prop {tagConstructor} DOM.dd(props, ...children)\n * @prop {tagConstructor} DOM.del(props, ...children)\n * @prop {tagConstructor} DOM.details(props, ...children)\n * @prop {tagConstructor} DOM.dfn\n * @prop {tagConstructor} DOM.dialog(props, ...children)\n * @prop {tagConstructor} DOM.div(props, ...children)\n * @prop {tagConstructor} DOM.dl(props, ...children)\n * @prop {tagConstructor} DOM.dt(props, ...children)\n * @prop {tagConstructor} DOM.em(props, ...children)\n * @prop {tagConstructor} DOM.embed(props, ...children)\n * @prop {tagConstructor} DOM.fieldset(props, ...children)\n * @prop {tagConstructor} DOM.figcaption(props, ...children)\n * @prop {tagConstructor} DOM.figure(props, ...children)\n * @prop {tagConstructor} DOM.footer(props, ...children)\n * @prop {tagConstructor} DOM.form(props, ...children)\n * @prop {tagConstructor} DOM.h1(props, ...children)\n * @prop {tagConstructor} DOM.h2(props, ...children)\n * @prop {tagConstructor} DOM.h3(props, ...children)\n * @prop {tagConstructor} DOM.h4(props, ...children)\n * @prop {tagConstructor} DOM.h5\n * @prop {tagConstructor} DOM.h6(props, ...children)\n * @prop {tagConstructor} DOM.head(props, ...children)\n * @prop {tagConstructor} DOM.header(props, ...children)\n * @prop {tagConstructor} DOM.hgroup(props, ...children)\n * @prop {tagConstructor} DOM.hr(props, ...children)\n * @prop {tagConstructor} DOM.html(props, ...children)\n * @prop {tagConstructor} DOM.i(props, ...children)\n * @prop {tagConstructor} DOM.iframe(props, ...children)\n * @prop {tagConstructor} DOM.img(props, ...children)\n * @prop {tagConstructor} DOM.input(props, ...children)\n * @prop {tagConstructor} DOM.ins(props, ...children)\n * @prop {tagConstructor} DOM.kbd(props, ...children)\n * @prop {tagConstructor} DOM.keygen(props, ...children)\n * @prop {tagConstructor} DOM.label(props, ...children)\n * @prop {tagConstructor} DOM.legend(props, ...children)\n * @prop {tagConstructor} DOM.li\n * @prop {tagConstructor} DOM.link(props, ...children)\n * @prop {tagConstructor} DOM.main(props, ...children)\n * @prop {tagConstructor} DOM.map(props, ...children)\n * @prop {tagConstructor} DOM.mark(props, ...children)\n * @prop {tagConstructor} DOM.menu(props, ...children)\n * @prop {tagConstructor} DOM.menuitem(props, ...children)\n * @prop {tagConstructor} DOM.meta(props, ...children)\n * @prop {tagConstructor} DOM.meter(props, ...children)\n * @prop {tagConstructor} DOM.nav(props, ...children)\n * @prop {tagConstructor} DOM.noscript(props, ...children)\n * @prop {tagConstructor} DOM.object(props, ...children)\n * @prop {tagConstructor} DOM.ol(props, ...children)\n * @prop {tagConstructor} DOM.optgroup\n * @prop {tagConstructor} DOM.option(props, ...children)\n * @prop {tagConstructor} DOM.output(props, ...children)\n * @prop {tagConstructor} DOM.p(props, ...children)\n * @prop {tagConstructor} DOM.param(props, ...children)\n * @prop {tagConstructor} DOM.picture(props, ...children)\n * @prop {tagConstructor} DOM.pre(props, ...children)\n * @prop {tagConstructor} DOM.progress(props, ...children)\n * @prop {tagConstructor} DOM.q(props, ...children)\n * @prop {tagConstructor} DOM.rp(props, ...children)\n * @prop {tagConstructor} DOM.rt(props, ...children)\n * @prop {tagConstructor} DOM.ruby(props, ...children)\n * @prop {tagConstructor} DOM.s(props, ...children)\n * @prop {tagConstructor} DOM.samp(props, ...children)\n * @prop {tagConstructor} DOM.script(props, ...children)\n * @prop {tagConstructor} DOM.section\n * @prop {tagConstructor} DOM.select(props, ...children)\n * @prop {tagConstructor} DOM.small(props, ...children)\n * @prop {tagConstructor} DOM.source(props, ...children)\n * @prop {tagConstructor} DOM.span(props, ...children)\n * @prop {tagConstructor} DOM.strong(props, ...children)\n * @prop {tagConstructor} DOM.style(props, ...children)\n * @prop {tagConstructor} DOM.sub(props, ...children)\n * @prop {tagConstructor} DOM.summary(props, ...children)\n * @prop {tagConstructor} DOM.sup(props, ...children)\n * @prop {tagConstructor} DOM.table(props, ...children)\n * @prop {tagConstructor} DOM.tbody(props, ...children)\n * @prop {tagConstructor} DOM.td(props, ...children)\n * @prop {tagConstructor} DOM.textarea\n * @prop {tagConstructor} DOM.tfoot(props, ...children)\n * @prop {tagConstructor} DOM.th(props, ...children)\n * @prop {tagConstructor} DOM.thead(props, ...children)\n * @prop {tagConstructor} DOM.time(props, ...children)\n * @prop {tagConstructor} DOM.title(props, ...children)\n * @prop {tagConstructor} DOM.tr(props, ...children)\n * @prop {tagConstructor} DOM.track(props, ...children)\n * @prop {tagConstructor} DOM.u(props, ...children)\n * @prop {tagConstructor} DOM.ul(props, ...children)\n * @prop {tagConstructor} DOM.var(props, ...children)\n * @prop {tagConstructor} DOM.video(props, ...children)\n * @prop {tagConstructor} DOM.wbr(props, ...children)\n */\nexport const DOM = supportedTags\n  .split(' ')\n  .reduce((base, t) => {\n    base[t] = wrapTag(t);\n    return base;\n  }, {});\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/preact.js","!function(global, factory) {\n    'object' == typeof exports && 'undefined' != typeof module ? factory(exports) : 'function' == typeof define && define.amd ? define([ 'exports' ], factory) : factory(global.preact = global.preact || {});\n}(this, function(exports) {\n    function VNode(nodeName, attributes, children) {\n        this.nodeName = nodeName;\n        this.attributes = attributes;\n        this.children = children;\n        this.key = attributes && attributes.key;\n    }\n    function h(nodeName, attributes) {\n        var lastSimple, child, simple, i, children = [];\n        for (i = arguments.length; i-- > 2; ) stack.push(arguments[i]);\n        if (attributes && attributes.children) {\n            if (!stack.length) stack.push(attributes.children);\n            delete attributes.children;\n        }\n        while (stack.length) if ((child = stack.pop()) instanceof Array) for (i = child.length; i--; ) stack.push(child[i]); else if (null != child && child !== !1) {\n            if ('number' == typeof child || child === !0) child = String(child);\n            simple = 'string' == typeof child;\n            if (simple && lastSimple) children[children.length - 1] += child; else {\n                children.push(child);\n                lastSimple = simple;\n            }\n        }\n        var p = new VNode(nodeName, attributes || void 0, children);\n        if (options.vnode) options.vnode(p);\n        return p;\n    }\n    function extend(obj, props) {\n        if (props) for (var i in props) obj[i] = props[i];\n        return obj;\n    }\n    function clone(obj) {\n        return extend({}, obj);\n    }\n    function delve(obj, key) {\n        for (var p = key.split('.'), i = 0; i < p.length && obj; i++) obj = obj[p[i]];\n        return obj;\n    }\n    function isFunction(obj) {\n        return 'function' == typeof obj;\n    }\n    function isString(obj) {\n        return 'string' == typeof obj;\n    }\n    function hashToClassName(c) {\n        var str = '';\n        for (var prop in c) if (c[prop]) {\n            if (str) str += ' ';\n            str += prop;\n        }\n        return str;\n    }\n    function cloneElement(vnode, props) {\n        return h(vnode.nodeName, extend(clone(vnode.attributes), props), arguments.length > 2 ? [].slice.call(arguments, 2) : vnode.children);\n    }\n    function createLinkedState(component, key, eventPath) {\n        var path = key.split('.');\n        return function(e) {\n            var t = e && e.target || this, state = {}, obj = state, v = isString(eventPath) ? delve(e, eventPath) : t.nodeName ? t.type.match(/^che|rad/) ? t.checked : t.value : e, i = 0;\n            for (;i < path.length - 1; i++) obj = obj[path[i]] || (obj[path[i]] = !i && component.state[path[i]] || {});\n            obj[path[i]] = v;\n            component.setState(state);\n        };\n    }\n    function enqueueRender(component) {\n        if (!component._dirty && (component._dirty = !0) && 1 == items.push(component)) (options.debounceRendering || defer)(rerender);\n    }\n    function rerender() {\n        var p, list = items;\n        items = [];\n        while (p = list.pop()) if (p._dirty) renderComponent(p);\n    }\n    function isFunctionalComponent(vnode) {\n        var nodeName = vnode && vnode.nodeName;\n        return nodeName && isFunction(nodeName) && !(nodeName.prototype && nodeName.prototype.render);\n    }\n    function buildFunctionalComponent(vnode, context) {\n        return vnode.nodeName(getNodeProps(vnode), context || EMPTY);\n    }\n    function isSameNodeType(node, vnode) {\n        if (isString(vnode)) return node instanceof Text;\n        if (isString(vnode.nodeName)) return !node._componentConstructor && isNamedNode(node, vnode.nodeName);\n        if (isFunction(vnode.nodeName)) return (node._componentConstructor ? node._componentConstructor === vnode.nodeName : !0) || isFunctionalComponent(vnode); else ;\n    }\n    function isNamedNode(node, nodeName) {\n        return node.normalizedNodeName === nodeName || toLowerCase(node.nodeName) === toLowerCase(nodeName);\n    }\n    function getNodeProps(vnode) {\n        var props = clone(vnode.attributes);\n        props.children = vnode.children;\n        var defaultProps = vnode.nodeName.defaultProps;\n        if (defaultProps) for (var i in defaultProps) if (void 0 === props[i]) props[i] = defaultProps[i];\n        return props;\n    }\n    function removeNode(node) {\n        var p = node.parentNode;\n        if (p) p.removeChild(node);\n    }\n    function setAccessor(node, name, old, value, isSvg) {\n        if ('className' === name) name = 'class';\n        if ('class' === name && value && 'object' == typeof value) value = hashToClassName(value);\n        if ('key' === name) ; else if ('class' === name && !isSvg) node.className = value || ''; else if ('style' === name) {\n            if (!value || isString(value) || isString(old)) node.style.cssText = value || '';\n            if (value && 'object' == typeof value) {\n                if (!isString(old)) for (var i in old) if (!(i in value)) node.style[i] = '';\n                for (var i in value) node.style[i] = 'number' == typeof value[i] && !NON_DIMENSION_PROPS[i] ? value[i] + 'px' : value[i];\n            }\n        } else if ('dangerouslySetInnerHTML' === name) node.innerHTML = value && value.__html || ''; else if ('o' == name[0] && 'n' == name[1]) {\n            var l = node._listeners || (node._listeners = {});\n            name = toLowerCase(name.substring(2));\n            if (value) {\n                if (!l[name]) node.addEventListener(name, eventProxy, !!NON_BUBBLING_EVENTS[name]);\n            } else if (l[name]) node.removeEventListener(name, eventProxy, !!NON_BUBBLING_EVENTS[name]);\n            l[name] = value;\n        } else if ('list' !== name && 'type' !== name && !isSvg && name in node) {\n            setProperty(node, name, null == value ? '' : value);\n            if (null == value || value === !1) node.removeAttribute(name);\n        } else {\n            var ns = isSvg && name.match(/^xlink\\:?(.+)/);\n            if (null == value || value === !1) if (ns) node.removeAttributeNS('http://www.w3.org/1999/xlink', toLowerCase(ns[1])); else node.removeAttribute(name); else if ('object' != typeof value && !isFunction(value)) if (ns) node.setAttributeNS('http://www.w3.org/1999/xlink', toLowerCase(ns[1]), value); else node.setAttribute(name, value);\n        }\n    }\n    function setProperty(node, name, value) {\n        try {\n            node[name] = value;\n        } catch (e) {}\n    }\n    function eventProxy(e) {\n        return this._listeners[e.type](options.event && options.event(e) || e);\n    }\n    function collectNode(node) {\n        removeNode(node);\n        if (node instanceof Element) {\n            node._component = node._componentConstructor = null;\n            var _name = node.normalizedNodeName || toLowerCase(node.nodeName);\n            (nodes[_name] || (nodes[_name] = [])).push(node);\n        }\n    }\n    function createNode(nodeName, isSvg) {\n        var name = toLowerCase(nodeName), node = nodes[name] && nodes[name].pop() || (isSvg ? document.createElementNS('http://www.w3.org/2000/svg', nodeName) : document.createElement(nodeName));\n        node.normalizedNodeName = name;\n        return node;\n    }\n    function flushMounts() {\n        var c;\n        while (c = mounts.pop()) {\n            if (options.afterMount) options.afterMount(c);\n            if (c.componentDidMount) c.componentDidMount();\n        }\n    }\n    function diff(dom, vnode, context, mountAll, parent, componentRoot) {\n        if (!diffLevel++) {\n            isSvgMode = parent instanceof SVGElement;\n            hydrating = dom && !(ATTR_KEY in dom);\n        }\n        var ret = idiff(dom, vnode, context, mountAll);\n        if (parent && ret.parentNode !== parent) parent.appendChild(ret);\n        if (!--diffLevel) {\n            hydrating = !1;\n            if (!componentRoot) flushMounts();\n        }\n        return ret;\n    }\n    function idiff(dom, vnode, context, mountAll) {\n        var originalAttributes = vnode && vnode.attributes;\n        while (isFunctionalComponent(vnode)) vnode = buildFunctionalComponent(vnode, context);\n        if (null == vnode) vnode = '';\n        if (isString(vnode)) {\n            if (dom && dom instanceof Text) {\n                if (dom.nodeValue != vnode) dom.nodeValue = vnode;\n            } else {\n                if (dom) recollectNodeTree(dom);\n                dom = document.createTextNode(vnode);\n            }\n            dom[ATTR_KEY] = !0;\n            return dom;\n        }\n        if (isFunction(vnode.nodeName)) return buildComponentFromVNode(dom, vnode, context, mountAll);\n        var out = dom, nodeName = String(vnode.nodeName), prevSvgMode = isSvgMode, vchildren = vnode.children;\n        isSvgMode = 'svg' === nodeName ? !0 : 'foreignObject' === nodeName ? !1 : isSvgMode;\n        if (!dom) out = createNode(nodeName, isSvgMode); else if (!isNamedNode(dom, nodeName)) {\n            out = createNode(nodeName, isSvgMode);\n            while (dom.firstChild) out.appendChild(dom.firstChild);\n            if (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n            recollectNodeTree(dom);\n        }\n        var fc = out.firstChild, props = out[ATTR_KEY];\n        if (!props) {\n            out[ATTR_KEY] = props = {};\n            for (var a = out.attributes, i = a.length; i--; ) props[a[i].name] = a[i].value;\n        }\n        diffAttributes(out, vnode.attributes, props);\n        if (!hydrating && vchildren && 1 === vchildren.length && 'string' == typeof vchildren[0] && fc && fc instanceof Text && !fc.nextSibling) {\n            if (fc.nodeValue != vchildren[0]) fc.nodeValue = vchildren[0];\n        } else if (vchildren && vchildren.length || fc) innerDiffNode(out, vchildren, context, mountAll);\n        if (originalAttributes && 'function' == typeof originalAttributes.ref) (props.ref = originalAttributes.ref)(out);\n        isSvgMode = prevSvgMode;\n        return out;\n    }\n    function innerDiffNode(dom, vchildren, context, mountAll) {\n        var j, c, vchild, child, originalChildren = dom.childNodes, children = [], keyed = {}, keyedLen = 0, min = 0, len = originalChildren.length, childrenLen = 0, vlen = vchildren && vchildren.length;\n        if (len) for (var i = 0; i < len; i++) {\n            var _child = originalChildren[i], props = _child[ATTR_KEY], key = vlen ? (c = _child._component) ? c.__key : props ? props.key : null : null;\n            if (null != key) {\n                keyedLen++;\n                keyed[key] = _child;\n            } else if (hydrating || props) children[childrenLen++] = _child;\n        }\n        if (vlen) for (var i = 0; i < vlen; i++) {\n            vchild = vchildren[i];\n            child = null;\n            var key = vchild.key;\n            if (null != key) {\n                if (keyedLen && key in keyed) {\n                    child = keyed[key];\n                    keyed[key] = void 0;\n                    keyedLen--;\n                }\n            } else if (!child && min < childrenLen) for (j = min; j < childrenLen; j++) {\n                c = children[j];\n                if (c && isSameNodeType(c, vchild)) {\n                    child = c;\n                    children[j] = void 0;\n                    if (j === childrenLen - 1) childrenLen--;\n                    if (j === min) min++;\n                    break;\n                }\n            }\n            child = idiff(child, vchild, context, mountAll);\n            if (child && child !== dom) if (i >= len) dom.appendChild(child); else if (child !== originalChildren[i]) {\n                if (child === originalChildren[i + 1]) removeNode(originalChildren[i]);\n                dom.insertBefore(child, originalChildren[i] || null);\n            }\n        }\n        if (keyedLen) for (var i in keyed) if (keyed[i]) recollectNodeTree(keyed[i]);\n        while (min <= childrenLen) {\n            child = children[childrenLen--];\n            if (child) recollectNodeTree(child);\n        }\n    }\n    function recollectNodeTree(node, unmountOnly) {\n        var component = node._component;\n        if (component) unmountComponent(component, !unmountOnly); else {\n            if (node[ATTR_KEY] && node[ATTR_KEY].ref) node[ATTR_KEY].ref(null);\n            if (!unmountOnly) collectNode(node);\n            var c;\n            while (c = node.lastChild) recollectNodeTree(c, unmountOnly);\n        }\n    }\n    function diffAttributes(dom, attrs, old) {\n        for (var _name in old) if (!(attrs && _name in attrs) && null != old[_name]) setAccessor(dom, _name, old[_name], old[_name] = void 0, isSvgMode);\n        if (attrs) for (var _name2 in attrs) if (!('children' === _name2 || 'innerHTML' === _name2 || _name2 in old && attrs[_name2] === ('value' === _name2 || 'checked' === _name2 ? dom[_name2] : old[_name2]))) setAccessor(dom, _name2, old[_name2], old[_name2] = attrs[_name2], isSvgMode);\n    }\n    function collectComponent(component) {\n        var name = component.constructor.name, list = components[name];\n        if (list) list.push(component); else components[name] = [ component ];\n    }\n    function createComponent(Ctor, props, context) {\n        var inst = new Ctor(props, context), list = components[Ctor.name];\n        Component.call(inst, props, context);\n        if (list) for (var i = list.length; i--; ) if (list[i].constructor === Ctor) {\n            inst.nextBase = list[i].nextBase;\n            list.splice(i, 1);\n            break;\n        }\n        return inst;\n    }\n    function setComponentProps(component, props, opts, context, mountAll) {\n        if (!component._disable) {\n            component._disable = !0;\n            if (component.__ref = props.ref) delete props.ref;\n            if (component.__key = props.key) delete props.key;\n            if (!component.base || mountAll) {\n                if (component.componentWillMount) component.componentWillMount();\n            } else if (component.componentWillReceiveProps) component.componentWillReceiveProps(props, context);\n            if (context && context !== component.context) {\n                if (!component.prevContext) component.prevContext = component.context;\n                component.context = context;\n            }\n            if (!component.prevProps) component.prevProps = component.props;\n            component.props = props;\n            component._disable = !1;\n            if (0 !== opts) if (1 === opts || options.syncComponentUpdates !== !1 || !component.base) renderComponent(component, 1, mountAll); else enqueueRender(component);\n            if (component.__ref) component.__ref(component);\n        }\n    }\n    function renderComponent(component, opts, mountAll, isChild) {\n        if (!component._disable) {\n            var skip, rendered, inst, cbase, props = component.props, state = component.state, context = component.context, previousProps = component.prevProps || props, previousState = component.prevState || state, previousContext = component.prevContext || context, isUpdate = component.base, nextBase = component.nextBase, initialBase = isUpdate || nextBase, initialChildComponent = component._component;\n            if (isUpdate) {\n                component.props = previousProps;\n                component.state = previousState;\n                component.context = previousContext;\n                if (2 !== opts && component.shouldComponentUpdate && component.shouldComponentUpdate(props, state, context) === !1) skip = !0; else if (component.componentWillUpdate) component.componentWillUpdate(props, state, context);\n                component.props = props;\n                component.state = state;\n                component.context = context;\n            }\n            component.prevProps = component.prevState = component.prevContext = component.nextBase = null;\n            component._dirty = !1;\n            if (!skip) {\n                if (component.render) rendered = component.render(props, state, context);\n                if (component.getChildContext) context = extend(clone(context), component.getChildContext());\n                while (isFunctionalComponent(rendered)) rendered = buildFunctionalComponent(rendered, context);\n                var toUnmount, base, childComponent = rendered && rendered.nodeName;\n                if (isFunction(childComponent)) {\n                    var childProps = getNodeProps(rendered);\n                    inst = initialChildComponent;\n                    if (inst && inst.constructor === childComponent && childProps.key == inst.__key) setComponentProps(inst, childProps, 1, context); else {\n                        toUnmount = inst;\n                        inst = createComponent(childComponent, childProps, context);\n                        inst.nextBase = inst.nextBase || nextBase;\n                        inst._parentComponent = component;\n                        component._component = inst;\n                        setComponentProps(inst, childProps, 0, context);\n                        renderComponent(inst, 1, mountAll, !0);\n                    }\n                    base = inst.base;\n                } else {\n                    cbase = initialBase;\n                    toUnmount = initialChildComponent;\n                    if (toUnmount) cbase = component._component = null;\n                    if (initialBase || 1 === opts) {\n                        if (cbase) cbase._component = null;\n                        base = diff(cbase, rendered, context, mountAll || !isUpdate, initialBase && initialBase.parentNode, !0);\n                    }\n                }\n                if (initialBase && base !== initialBase && inst !== initialChildComponent) {\n                    var baseParent = initialBase.parentNode;\n                    if (baseParent && base !== baseParent) {\n                        baseParent.replaceChild(base, initialBase);\n                        if (!toUnmount) {\n                            initialBase._component = null;\n                            recollectNodeTree(initialBase);\n                        }\n                    }\n                }\n                if (toUnmount) unmountComponent(toUnmount, base !== initialBase);\n                component.base = base;\n                if (base && !isChild) {\n                    var componentRef = component, t = component;\n                    while (t = t._parentComponent) (componentRef = t).base = base;\n                    base._component = componentRef;\n                    base._componentConstructor = componentRef.constructor;\n                }\n            }\n            if (!isUpdate || mountAll) mounts.unshift(component); else if (!skip) {\n                if (component.componentDidUpdate) component.componentDidUpdate(previousProps, previousState, previousContext);\n                if (options.afterUpdate) options.afterUpdate(component);\n            }\n            var fn, cb = component._renderCallbacks;\n            if (cb) while (fn = cb.pop()) fn.call(component);\n            if (!diffLevel && !isChild) flushMounts();\n        }\n    }\n    function buildComponentFromVNode(dom, vnode, context, mountAll) {\n        var c = dom && dom._component, oldDom = dom, isDirectOwner = c && dom._componentConstructor === vnode.nodeName, isOwner = isDirectOwner, props = getNodeProps(vnode);\n        while (c && !isOwner && (c = c._parentComponent)) isOwner = c.constructor === vnode.nodeName;\n        if (c && isOwner && (!mountAll || c._component)) {\n            setComponentProps(c, props, 3, context, mountAll);\n            dom = c.base;\n        } else {\n            if (c && !isDirectOwner) {\n                unmountComponent(c, !0);\n                dom = oldDom = null;\n            }\n            c = createComponent(vnode.nodeName, props, context);\n            if (dom && !c.nextBase) {\n                c.nextBase = dom;\n                oldDom = null;\n            }\n            setComponentProps(c, props, 1, context, mountAll);\n            dom = c.base;\n            if (oldDom && dom !== oldDom) {\n                oldDom._component = null;\n                recollectNodeTree(oldDom);\n            }\n        }\n        return dom;\n    }\n    function unmountComponent(component, remove) {\n        if (options.beforeUnmount) options.beforeUnmount(component);\n        var base = component.base;\n        component._disable = !0;\n        if (component.componentWillUnmount) component.componentWillUnmount();\n        component.base = null;\n        var inner = component._component;\n        if (inner) unmountComponent(inner, remove); else if (base) {\n            if (base[ATTR_KEY] && base[ATTR_KEY].ref) base[ATTR_KEY].ref(null);\n            component.nextBase = base;\n            if (remove) {\n                removeNode(base);\n                collectComponent(component);\n            }\n            var c;\n            while (c = base.lastChild) recollectNodeTree(c, !remove);\n        }\n        if (component.__ref) component.__ref(null);\n        if (component.componentDidUnmount) component.componentDidUnmount();\n    }\n    function Component(props, context) {\n        this._dirty = !0;\n        this.context = context;\n        this.props = props;\n        if (!this.state) this.state = {};\n    }\n    function render(vnode, parent, merge) {\n        return diff(merge, vnode, {}, !1, parent);\n    }\n    var options = {};\n    var stack = [];\n    var lcCache = {};\n    var toLowerCase = function(s) {\n        return lcCache[s] || (lcCache[s] = s.toLowerCase());\n    };\n    var resolved = 'undefined' != typeof Promise && Promise.resolve();\n    var defer = resolved ? function(f) {\n        resolved.then(f);\n    } : setTimeout;\n    var EMPTY = {};\n    var ATTR_KEY = 'undefined' != typeof Symbol ? Symbol.for('preactattr') : '__preactattr_';\n    var NON_DIMENSION_PROPS = {\n        boxFlex: 1,\n        boxFlexGroup: 1,\n        columnCount: 1,\n        fillOpacity: 1,\n        flex: 1,\n        flexGrow: 1,\n        flexPositive: 1,\n        flexShrink: 1,\n        flexNegative: 1,\n        fontWeight: 1,\n        lineClamp: 1,\n        lineHeight: 1,\n        opacity: 1,\n        order: 1,\n        orphans: 1,\n        strokeOpacity: 1,\n        widows: 1,\n        zIndex: 1,\n        zoom: 1\n    };\n    var NON_BUBBLING_EVENTS = {\n        blur: 1,\n        error: 1,\n        focus: 1,\n        load: 1,\n        resize: 1,\n        scroll: 1\n    };\n    var items = [];\n    var nodes = {};\n    var mounts = [];\n    var diffLevel = 0;\n    var isSvgMode = !1;\n    var hydrating = !1;\n    var components = {};\n    extend(Component.prototype, {\n        linkState: function(key, eventPath) {\n            var c = this._linkedStates || (this._linkedStates = {});\n            return c[key + eventPath] || (c[key + eventPath] = createLinkedState(this, key, eventPath));\n        },\n        setState: function(state, callback) {\n            var s = this.state;\n            if (!this.prevState) this.prevState = clone(s);\n            extend(s, isFunction(state) ? state(s, this.props) : state);\n            if (callback) (this._renderCallbacks = this._renderCallbacks || []).push(callback);\n            enqueueRender(this);\n        },\n        forceUpdate: function() {\n            renderComponent(this, 2);\n        },\n        render: function() {}\n    });\n    exports.h = h;\n    exports.cloneElement = cloneElement;\n    exports.Component = Component;\n    exports.render = render;\n    exports.rerender = rerender;\n    exports.options = options;\n});\n//# sourceMappingURL=preact.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/preact/dist/preact.js\n// module id = 2\n// module chunks = 0","'use strict';\n\nexport function createSelector() {\n  let dependencies = Array.prototype.slice.call(arguments);\n  if (!dependencies.length) throw new Error(\"Must supply at least one state to props function\");\n  let resultFunc = dependencies.pop();\n  // if no dependencies simply pass state\n  if (!dependencies.length) dependencies = [state=>state, (_, props)=>props];\n\n  // prepare dependencies for return value comparison\n  let cachedDependencies = dependencies.map(dependency => {\n    let lastVal = {};\n    return function () {\n      let args = Array.prototype.slice.call(arguments);\n      let newVal = dependency.apply(null, args);\n      if (lastVal !== newVal) {\n        //console.log(\"STATE CHANGED!\", lastVal, newVal);\n        lastVal = newVal;\n        return [true, newVal];\n      }\n      //console.log(\"STATE DIDN'T CHANGE!\", lastVal, newVal);\n      return [false, newVal];\n    };\n  });\n\n  let lastProps;\n  return function (state, props) {\n    //console.log(\"invoking selector with state\", JSON.stringify(state).slice(0, 200));\n    let collectedDeps = collectDependencies(state, props, cachedDependencies);\n\n    //console.log(\"Getting props from state\",lastProps, collectedDeps, resultFunc);\n    if (collectedDeps || !lastProps) {\n      //console.log(\"invoking result func\");\n      // data has changed = recalculate\n      lastProps = resultFunc.apply(null, collectedDeps);\n      if (!lastProps || typeof lastProps != 'object') throw new Error(\"Result function must return object\");\n      return [true, lastProps];\n    }\n\n    return [false, lastProps];\n  };\n}\n\n\nfunction collectDependencies(state, props, dependencies) {\n  let changed = false;\n  let collectedData = dependencies.map(dependency => {\n    let [didChange, data] = dependency(state, props);\n    if (didChange) changed = true;\n    return data;\n  });\n\n  if (changed) return collectedData;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/reselect.js","'use strict';\n\n// join classes\nexport function cl() {\n  let args = Array.prototype.slice.call(arguments);\n\n  return args.filter(x => !!x).join(' ');\n}\n\nexport const DEBUG = typeof process !== 'undefined' && process.env && process.env.NODE_ENV != 'production';\n\nexport function parseUri(uri) {\n  let location = {};\n\n  uri = uri.replace(/^(\\w+:)?\\/\\//, '');\n\n  let pathIndex = uri.indexOf('/');\n  let searchIndex = uri.indexOf('?');\n  let hashIndex = uri.indexOf('#');\n\n  if (pathIndex == -1) {\n    location.pathname = '';\n  }\n  else {\n    location.pathname = uri.slice(pathIndex, searchIndex == -1 ? uri.length : searchIndex);\n  }\n  if (searchIndex != -1) {\n    location.search = uri.slice(searchIndex + 1, hashIndex == -1 ? uri.length : hashIndex);\n  }\n  if (hashIndex != -1) {\n    location.hash = uri.slice(hashIndex + 1, uri.length);\n  }\n\n  return location;\n}\n\n\nexport const assign = Object.assign || function (target) {\n    if (target === undefined || target === null) {\n      throw new TypeError('Cannot convert undefined or null to object');\n    }\n\n    const output = Object(target);\n    for (let index = 1; index < arguments.length; index++) {\n      const source = arguments[index];\n      if (source !== undefined && source !== null) {\n        for (const nextKey in source) {\n          if (Object.prototype.hasOwnProperty.call(source, nextKey)) {\n            output[nextKey] = source[nextKey];\n          }\n        }\n      }\n    }\n    return output;\n  };\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/utils.js","'use strict';\n\nexport const setImmediate = window.setImmediate || function () {\n    let args = [];\n    let i = -1;\n    while (++i < arguments.length) args[i] = arguments[i];\n    // add time argument\n    args.splice(1, 0, 0);\n\n    return setTimeout.apply(window, args);\n  };\n\nexport const clearImmediate = window.clearImmediate || (handle => clearTimeout(handle));\n\nexport default setImmediate;\n\nexport function polyfill() {\n  window.setImmediate = setImmediate;\n  window.clearImmediate = clearImmediate;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/polyfill/set-immediate.js","'use strict';\n\nimport {store} from './store';\nimport {persistentStore, sessionStore, onStorageChange} from './storage';\n\n/**\n * state persistence module\n * @example\n * attachPersistence('storage', store);\n * attachSessionPersistence('session', store);\n */\n\n\nexport function attachSessionPersistence(path, options = {}) {\n  if (!path) throw new Error(\"A string path must be provided as first argument. e.g. 'session'\");\n  const STORAGE_KEY = options.key || 'state';\n\n  // load session state\n  let sessionState = sessionStore.getItem(STORAGE_KEY);\n  if (isNonEmptyObj(sessionState)) store(path, sessionState);\n  // subscribe to store changes\n  store.subscribe(path, state => sessionStore.setItem(STORAGE_KEY, state.session));\n}\n\n\nexport default attachPersistence;\nexport function attachPersistence(path, options = {}) {\n  if (!path) throw new Error(\"A string path must be provided as first argument. e.g. 'persistent'\");\n  const STORAGE_KEY = options.key || 'state';\n\n  // load persistent state\n  let persistentState = persistentStore.getItem(STORAGE_KEY);\n  if (isNonEmptyObj(persistentState)) store(STORAGE_KEY, persistentState);\n  // listen to persistent data changes\n  onStorageChange(STORAGE_KEY, persistentState => store(path, persistentState));\n  // subscribe to store changes\n  store.subscribe(path, state => persistentStore.setItem(STORAGE_KEY, state.persistent));\n}\n\nfunction isNonEmptyObj(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]' &&\n    Object.keys(obj).length;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/store-persistence.js","'use strict';\n\nimport {setImmediate, clearImmediate} from '../../polyfill/set-immediate';\nimport {assign} from '../utils';\n\nconst ROOT_PATH = \"@@ROOT_PATH@@\";\nconst BOOT_ACTION = \"@@BOOT_ACTION@@\";\nconst listeners = Object.create(null);\n//noinspection JSUnresolvedVariable\nconst DEBUG = typeof process !== 'undefined' && process.env && process.env.NODE_ENV != 'production';\nlet state = {};\nlet pendingUpdates = null;\nlet booted;\nlet _reducers = [];\n\n/**\n * United dispatch/store function.\n * dispatch is async due to batching\n * @param {String|Object} [path]\n * @param {Object} [action]\n *\n * Example:\n * # set initial state\n * store('boot', {});\n *\n *  # get state:\n *  let state = store();\n *\n *  # dispatch using reducers tree\n *  // before { dot: { notation: { object: 'existing value', other: 'value' } } }\n *  store('dot.notation', {object: 'to merge in the given path'})\n *  // after { dot: { notation: { object: 'to merge in the given path', other: 'value' } } }\n *\n *  # plain action dispatch\n *  addReducer(action => {\n *    switch () {\n *    }\n *  })\n *  store({type: 'MY_ACTION', payload: {my: 'data'}})\n *\n */\nexport function store(path, action) {\n  return dispatch(path, action);\n}\nexport default store;\n\nstore.subscribe = function (path, listener) {\n  return subscriber(path, listener);\n};\n\nstore.unsubscribe = function (path, listener) {\n  return subscriber(path, listener, true);\n};\n\nstore.forceUpdate = function () {\n  for (let path in listeners) {\n    //noinspection JSUnfilteredForInLoop\n    invokeListeners(listeners[path], [state]);\n  }\n};\n\nstore.getState = function () {\n  return store();\n};\n\nexport function addReducer(path, reducer) {\n  if (typeof path == 'function') {\n    reducer = path;\n    path = null;\n  }\n\n  if (path && typeof path != 'string' || !reducer) {\n    throw new Error(\"Wrong input to addReducer - expects optional string path and reducer function\");\n  }\n\n  let addItem = () => {\n    let reducerItem = {\n      path: path || '',\n      reducer\n    };\n    // get initial state\n    invokeReducers([reducerItem], state, {type: BOOT_ACTION});\n\n    _reducers.push(reducerItem);\n  };\n\n  // if not booted allow boot to propagate first\n  if (booted) addItem();\n  else setImmediate(addItem);\n\n  return {\n    destroy() {\n      if (booted) removeReducer(path, reducer);\n      else setImmediate(removeReducer, path, reducer);\n    }\n  };\n}\n\nexport function removeReducer(path, reducer) {\n  if (typeof path == 'function') {\n    reducer = path;\n    path = null;\n  }\n\n  let index = _reducers.indexOf(reducer);\n  if (index !== -1) {\n    _reducers.splice(index, 1);\n  }\n}\n\n// ------------- Internals -------------\n\nsetImmediate(() => setImmediate(() => setImmediate(() => booted = true)));\n\nfunction invokeReducers(reducers, data, action) {\n  let reduce = () => reducers\n    .reduce((changed, reducerItem) => {\n      // get section by path\n      let [dataSection, parent, prop] = getDeepPath(reducerItem.path, data);\n      // invoke reducer on specific path\n      let retVal = reducerItem.reducer(dataSection, action);\n      let [didChange, result] = assignRecursive(dataSection, retVal);\n      if (didChange && parent) {\n        parent[prop] = result;\n      }\n      return didChange || changed;\n    }, false);\n\n  if (booted) return reduce();\n  return setImmediate(reduce);\n}\n\nfunction getDeepPath(path, rootObj) {\n  if (!path) return [rootObj];\n  let paths = path.split('.');\n  let parent;\n  let prop;\n  let target = rootObj;\n  let l = paths.length;\n  let i = 0;\n  // creating missing object dynamically\n  while (i < l) {\n\n    let p = paths[i];\n    //console.log(\"dispatching to path\", i, p);\n    if (!target[p]) {\n      target[p] = {};\n    }\n    // store reference to the parent to allow override\n    parent = target;\n    prop = p;\n    target = target[p];\n    i++;\n  }\n\n  return [target, parent, prop];\n}\n\nfunction dispatch(path, action) {\n  if (path === void 0) {\n    return DEBUG ? deepFreeze(state) : state;\n  }\n  else if (typeof path == 'string' && action === void 0) {\n    let [statePath] = getDeepPath(path, state);\n    return DEBUG ? deepFreeze(statePath) : statePath;\n  }\n\n  //console.log(\"DISPATCH\", path, action, new Error().stack);\n  let normalizedAction;\n  if (isObj(path)) {\n    normalizedAction = path;\n  }\n  else {\n    normalizedAction = {\n      type: path,\n      payload: action\n    };\n  }\n\n  let changed;\n  if (typeof path == 'string') {\n    if (!isObj(action)) throw new Error(\"Can't use tree update without valid data (expects Object)\");\n    let parent;\n    let prop;\n    let target;\n    if (path == 'boot') {\n      target = state;\n      booted = true;\n    }\n    else {\n      // get deep path from dot notation - creates children implicitly\n      [target, parent, prop] = getDeepPath(path, state);\n    }\n    let [didChanged, result] = assignRecursive(target, action) || changed;\n    if (didChanged && parent) {\n      parent[prop] = result;\n    }\n\n    changed = changed || didChanged;\n  }\n  else {\n    path = '';\n    changed = invokeReducers(_reducers, state, normalizedAction) || changed;\n  }\n\n  // console.log(\"PROCESSED DISPATCH changed?\", !!changed);\n  if (changed) {\n    state = assign({}, state);\n    updateSubscribers(path);\n  }\n}\n\nfunction updateSubscribers(path) {\n  let key = path || ROOT_PATH;\n  // console.log(\"adding subscribers to que update on path\", key);\n  if (pendingUpdates) {\n    pendingUpdates.add(key);\n    return;\n  }\n\n  pendingUpdates = new Set();\n  pendingUpdates.add(key);\n  setImmediate(() => {\n    // console.log(\"INVOKING QUE of subscribers\");\n    let rootInvoked;\n    let newState = state;\n    if (DEBUG) {\n      newState = deepFreeze(newState);\n    }\n\n    let list = pendingUpdates;\n    pendingUpdates = null;\n    // shared track of invoked listeners for all paths to avoid multi calls to same invoker\n    let invokedListeners = new Set();\n    for (let paths of list.values()) {\n      paths = paths.split('.');\n      while (paths.length) {\n        let path = paths.join('.');\n        // track invocation of root path\n        if (path == ROOT_PATH) rootInvoked = true;\n        // console.log(\"invoking listeners for path\", path, listeners[path] && listeners[path].size);\n        invokeListeners(listeners[path], [newState], invokedListeners);\n        paths.pop();\n      }\n    }\n\n    if (!rootInvoked) {\n      //console.log(\"invoking listeners for ROOT_PATH\", listeners[ROOT_PATH] && listeners[ROOT_PATH].size);\n      invokeListeners(listeners[ROOT_PATH], [newState], invokedListeners);\n    }\n  });\n}\n\nfunction subscriber(path, listener, remove) {\n  if (!path) throw new Error(\"listener must be provided\");\n  if (typeof path == 'function') {\n    listener = path;\n    path = ROOT_PATH;\n  }\n\n  if (!listeners[path]) {\n    listeners[path] = new Set();\n  }\n\n  if (remove) {\n    listeners[path].delete(listener);\n    if (!listeners[path].size) {\n      delete listeners[path];\n    }\n  }\n  else {\n    listeners[path].add(listener);\n  }\n\n  return !remove && {\n      unsubscribe() {\n        subscriber(path, listener, true);\n      }\n    };\n}\n\nfunction invokeListeners(listeners, args, invokedListeners) {\n  invokedListeners = invokedListeners || new Set();\n  if (!listeners) return;\n  for (let listener of listeners.values()) {\n    // don't call same listener more than once in a single round\n    if (invokedListeners.has(listener)) continue;\n    invokedListeners.add(listener);\n\n    listener.apply(null, args);\n  }\n}\n\nfunction assignRecursive(base, obj, seen) {\n  seen = seen || [];\n  // completely empty object\n  if (obj === null) return [true, {}];\n\n  if (!isObj(obj)) return [false];\n  let changed = false;\n  for (let p in obj) {\n    if (!obj.hasOwnProperty(p)) continue;\n\n    //console.log(`--- assigning`, p,\n    //  Array.isArray(base[p]) ? 'array' : (base[p] !== undefined && typeof base[p] || base[p]), base[p],\n    //  Array.isArray(obj[p]) ? 'array' : (obj[p] !== undefined && typeof obj[p] || obj[p]), obj[p]\n    //);\n    if (isObj(obj[p]) && isObj(base[p])) {\n      if (seen.indexOf(obj[p]) > -1) throw new Error(\"Circular object can't be part of the state tree\");\n      seen.push(obj[p]);\n      let [childChanged, result] = assignRecursive(base[p], obj[p], seen);\n      if (childChanged) {\n        // changed\n        base[p] = result;\n        changed = true;\n      }\n      // remove dangling empty objects\n      if (!Object.keys(base[p]).length) {\n        delete base[p];\n      }\n    }\n    else if (obj[p] === null) {\n      delete base[p];\n      changed = true;\n    }\n    else if (base[p] !== obj[p]) {\n      base[p] = obj[p];\n      changed = true;\n    }\n  }\n\n  if (changed) base = assign({}, base);\n\n  return [changed, base];\n}\n\nfunction deepFreeze(obj) {\n  if (Array.isArray(obj)) return obj.map(deepFreeze);\n  if (!isObj(obj)) return obj;\n\n  let target = {};\n\n  for (let p in obj) {\n    if (!obj.hasOwnProperty(p)) continue;\n    target[p] = deepFreeze(obj[p]);\n  }\n\n  return Object.freeze(target);\n}\n\nfunction isObj(obj) {\n  return Object.prototype.toString.call(obj) == '[object Object]';\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/store/index.js","'use strict';\n\nfunction sessionGet(key) {\n  if (!window.sessionStorage) return null;\n  try {\n    return JSON.parse(window.sessionStorage.getItem(key));\n  } catch (e) {\n    window.sessionStorage.removeItem(key);\n    return null;\n  }\n\n}\nfunction sessionSet(key, value) {\n  if (!window.sessionStorage) return;\n\n  window.sessionStorage.setItem(key, JSON.stringify(value));\n}\n\nexport const sessionStore = {\n  getItem: sessionGet,\n  setItem: sessionSet\n};\n\nfunction persistentGet(key) {\n  if (!window.localStorage) return null;\n\n  return JSON.parse(window.localStorage.getItem(key));\n}\nfunction persistentSet(key, value) {\n  if (!window.localStorage) return;\n\n  window.localStorage.setItem(key, JSON.stringify(value));\n}\n\nlet listenersCache = new Map();\n\nexport function onStorageChange(key, listener) {\n  if (window.localStorage) {\n    // internal listener wrapper\n    let eventListener = e => {\n      if (e.key === null || e.key === key) {\n        listener(persistentGet(key));\n      }\n    };\n\n    // save listener to cache\n    let obj = {};\n    obj[key] = eventListener;\n    listenersCache.set(listener, obj);\n\n    // attach listener\n    window.addEventListener('storage', eventListener);\n  }\n}\n//noinspection JSUnusedGlobalSymbols\nexport function offStorageChange(key, listener) {\n  let eventListeners = listenersCache.get(listener);\n  if (eventListeners[key]) {\n    // remove listener\n    window.removeEventListener('storage', eventListeners[key]);\n  }\n}\n\nexport const persistentStore = {\n  getItem: persistentGet,\n  setItem: persistentSet\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/storage.js","'use strict';\n\nimport {assign} from './utils';\nimport {createClass} from './preact';\n\nexport function createConnector(store) {\n\n  return (mapStateToProps, mapDispatchToProps, mergeProps) => component => {\n\n    //console.log(\"create selector\", mapStateToProps, mapDispatchToProps, mergeProps);\n    if (!mapDispatchToProps) mapDispatchToProps = dispatch => ({dispatch});\n    if (!mergeProps) mergeProps = (a, b, c) => assign({}, a, b, c);\n\n    if (typeof component == 'function') {\n      component = createClass({\n        render: component\n      });\n    }\n\n    let hooks = getLifeCycleHooks(component);\n    //console.log(\"component123\", new Error().stack);\n    let cachedProps;\n    let handler = (props) => {\n      //console.log(\"HANDLER - running mapStateToProps\", mapStateToProps);\n      let hasCached = !!cachedProps;\n      let changed = true;\n      let stateProps = mapStateToProps && mapStateToProps(store(), props);\n      if (Array.isArray(stateProps)) {\n        changed = stateProps[0];\n        stateProps = stateProps[1];\n      }\n      let dispatchProps = mapDispatchToProps(store, props);\n\n      let mergedProps = mergeProps(props, stateProps, dispatchProps);\n      if (!isObj(mergedProps)) throw new Error(\"mergeProps function must return onject\");\n      cachedProps = mergedProps;\n      return changed || !hasCached;\n    };\n\n    // ### componentWillMount ### //\n    let storeListener;\n    component.prototype.componentWillMount = function () {\n      if (mapStateToProps) {\n        //console.log(\"will mount while mounted - hot reload? - anyways... un-subscribing\");\n        if (storeListener) store.unsubscribe(storeListener);\n\n        //console.log(\"Will mount - subscribing\");\n        storeListener = function () {\n          let changed = handler(this.props);\n          //console.log(changed ? \"store changed - triggering render\" : \"store didn't change - ignoring\");\n          if (changed) {\n            this.props = cachedProps;\n            this.forceUpdate();\n          }\n        }.bind(this);\n        store.subscribe(storeListener);\n      }\n\n      if (!cachedProps) handler(this.props);\n      this.props = cachedProps;\n      return hooks.componentWillMount && hooks.componentWillMount.apply(this, arguments);\n    };\n\n    // ### componentWillUnmount ### //\n    component.prototype.componentWillUnmount = function (nextProps) {\n      //console.log(\"Will unmount - un-subscribing\");\n      storeListener && store.unsubscribe(storeListener);\n      storeListener = null;\n\n      return hooks.componentWillUnmount && hooks.componentWillUnmount.call(this, nextProps);\n    };\n\n    // ### componentWillReceiveProps ### //\n    component.prototype.componentWillReceiveProps = function (nextProps) {\n      //console.log(\"Will receive props updating\");\n      return hooks.componentWillReceiveProps && hooks.componentWillReceiveProps.call(this, cachedProps);\n    };\n\n    // ### Render ### //\n    component.prototype.render = function (nextProps, state, context) {\n      if (!cachedProps) handler(this.props);\n\n      //console.log(\"rendering reselect \", !!cachedProps);\n      this.props = cachedProps;\n      return hooks.render && hooks.render.call(this, this.props, state, context);\n    };\n\n    return component;\n  };\n}\n\nfunction getLifeCycleHooks(component) {\n  return assign({}, component.render ? component : component.prototype);\n}\n\nfunction isObj(arg) {\n  return Object.prototype.toString.call(arg) == '[object Object]';\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/reselect-connect.js","'use strict';\n\n\nimport {createRouter} from './router';\nimport {createClass, $} from './preact';\nimport {store} from './store';\nimport {navigate as navigateHistory} from './store/history';\nimport {assign, cl} from './utils';\n\nconst navigate = url => store(navigateHistory(url));\n\nexport const Router = createClass({\n  getInitialState() {\n    return {\n      url: ''\n    };\n  },\n  componentDidMount() {\n    this.handleChange = state => {\n      if (state.url !== this.state.url) {\n        this.setState({url: state.url});\n      }\n    };\n    store.subscribe(this.handleChange);\n  },\n  componentWillUnmount() {\n    store.unsubscribe(this.handleChange);\n  },\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.routes !== this.routes) {\n      this.updateRouter(nextProps.routes);\n    }\n  },\n  updateRouter(routes) {\n    this.routes = routes || this.props.routes;\n    this.router = createRouter(this.routes, () => {\n      // console.log(\"[REFRESH ROUTER]\");\n      this.forceUpdate();\n    });\n  },\n  render(props) {\n    if (!this.router) this.updateRouter();\n    return this.router(location, props);\n  }\n});\n\nexport function Link(props) {\n  let {to, options, activeClass = 'active'} = props;\n\n  return $('span', assign({\n    onClick: () => navigate(to, options)\n  }, props, {\n    to: undefined,\n    options: undefined,\n    activeClass: undefined,\n    className: cl(\n      location.pathname == to.toString().replace(/(\\?|#).*/g, '') > -1 && activeClass,\n      props.className\n    )\n  }));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/routing.js","'use strict';\n\nimport {store} from './store';\nimport {navigate as navigateHistory} from './store/history';\nimport {DEBUG, assign} from './utils';\nimport {setImmediate, clearImmediate} from '../polyfill/set-immediate';\nimport {$} from './preact';\n\nconst navigate = (url, opts) => store(navigateHistory(url, opts));\n\nlet router = null;\n\nexport function createRouter(routes, refreshRouter) {\n  if (!routes) {\n    if (DEBUG) throw new Error(\"Router expects routes definition\");\n    return () => null;\n  }\n\n  routes = Array.isArray(routes) ? routes : [routes];\n\n  if (router) router.destroy();\n\n  router = new Router(routes, refreshRouter);\n\n  return function (location, props) {\n    return router.getComponent(location, props);\n  };\n}\n\n\nfunction Router(routes, refreshRouter) {\n  this.defaultRoute = null;\n  this.matchedChild = null;\n\n  this.refreshRouter = refreshRouter;\n\n  this.routes = routes.map(route => {\n    let instance = new Route(this, route, this.refreshRouter);\n    // get default route\n    if (resolve(route.path) == '/' || route.default) {\n      if (!this.defaultRoute) {\n        this.defaultRoute = instance;\n      }\n      else if (DEBUG) {\n        throw new Error(\"Can only have one route without path\");\n      }\n    }\n    return instance;\n  });\n}\n\nRouter.prototype.destroy = function () {\n  this.destroyed = true;\n  this.routes.forEach(route => route.destroy());\n};\n\nRouter.prototype.getLoader = function () {\n  return null;\n};\n\nRouter.prototype.getComponent = function (location, props) {\n  // console.log(\"GETTING COMPONENT ----------------------------------\");\n  let matchedRoute = matchRoute(this.routes, location);\n\n  if (this.matchedChild) {\n    this.matchedChild.unmount();\n    this.matchedChild = null;\n  }\n\n  if (matchedRoute) {\n    this.matchedChild = matchedRoute;\n    return this.matchedChild.mount(location, props, () => !this.destroyed && this.refreshRouter());\n  }\n  else if (this.defaultRoute) {\n    // console.log(\"seems strict - mounting default\");\n    return this.defaultRoute.mount(location, props, () => !this.destroyed && this.refreshRouter());\n  }\n\n  if (DEBUG) console.warn(\"No route was matched and no default route was defined\");\n  return null;\n};\n\n\nfunction Route(parent, route, refreshRouter) {\n  if (DEBUG) {\n    if (!route) throw new Error(\"Missing route\");\n    if (route.component && route.componentAsync || (!route.component && !route.componentAsync)) {\n      throw new Error(\"Can have only one component definitions\");\n    }\n    if (route.onEnter && route.onEnterAsync) throw new Error(\"Can't have both sync and async hooks defined\");\n  }\n\n  // references\n  this.route = route;\n  this.parent = parent;\n  this.refreshRouter = refreshRouter;\n  this.baseComponent = route.component;\n  this.defaultRoute = null;\n\n\n  // matching logic\n  this.isStringPath = !(route.path instanceof RegExp);\n  this.path = this.isStringPath ? resolve(route.path || route.strictPath) : '';\n  this.lineage = parent.path || '/';\n  this.strictPath = route.strictPath ? `${parent.path == '/' ? '' : parent.path}/${route.strictPath.replace(/^\\//, '')}` : '';\n  this.paramNames = [];\n  this.preparePath();\n\n  // state\n  this.mounted = false;\n  this.asyncLock = false;\n  this.loading = false;\n  this.loadingStart = 0;\n  this.params = {};\n\n  if (route.children && route.children.length) {\n    this.children = route.children.map(child => {\n      let instance = new Route(this, child, refreshRouter);\n      // get default route\n      if (resolve(instance.path) == '/' || child.default) {\n        if (!this.defaultRoute) {\n          this.defaultRoute = instance;\n        }\n        else if (DEBUG) {\n          throw new Error(\"Can only have one route without path\");\n        }\n      }\n\n      return instance;\n    });\n  }\n}\n\nRoute.prototype.destroy = function () {\n  this.destroyed = true;\n  this.children && this.children.forEach(child => child.destroy());\n\n  if (this.mounted) this.unmount();\n};\n\nRoute.prototype.mount = function (location, props) {\n  // console.log(\"[%s] Is user strict? PN->%s, SP->%s, %s %s\",this.route.id, location.pathname, this.strictPath, !!this.strictPath, location.pathname !== this.strictPath);\n  if (this.strictPath && location.pathname !== this.strictPath) {\n    // console.log(\"navigating to\", this.strictPath);\n    navigate(this.strictPath, {replace: true, preserveHash: true, preserveQuery: true});\n    return null;\n  }\n\n  if (this.loading || this.asyncLock) {\n    if (+new Date - this.loadingStart > 50) return this.getLoader();\n    return null;\n  }\n\n  let mergedProps = assign({}, this.params, props);\n\n  // life cycle hook\n  if (!this.mounted && (this.route.onEnter || this.route.onEnterAsync)) {\n    let canceled = false;\n\n    if (this.route.onEnter) {\n      this.route.onEnter((a, b) => {\n        canceled = true;\n        this.unmount();\n        navigate(a, b);\n      }, mergedProps);\n    }\n    else {\n      this.asyncLock = true;\n      this.loadingStart = +new Date;\n      let done = err => {\n        if (this.mounted) {\n          this.asyncLock = false;\n          if (err) return this.unmount();\n          this.refreshRouter();\n        }\n      };\n      setImmediate(() => {\n        this.route.onEnterAsync(done, (a, b) => {\n          done(true);\n          navigate(a, b);\n        }, mergedProps);\n      });\n    }\n\n    if (canceled) return null;\n  }\n\n  // load async component if needed\n  if (!this.baseComponent) {\n    this.loading = true;\n    this.loadingStart = +new Date;\n    this.route.componentAsync(asyncComponent => {\n      if (!asyncComponent && DEBUG) throw new Error(\"'componentAsync' must return valid component as callback argument\");\n      this.loading = false;\n      this.baseComponent = asyncComponent;\n      this.mounted && this.refreshRouter();\n    });\n  }\n\n  this.mounted = true;\n\n  if (this.baseComponent && !this.loading && !this.asyncLock) {\n    this.loadingStart = 0;\n    return $(this.baseComponent, mergedProps, this.matchedChild && this.matchedChild.mount(location));\n  }\n\n  this.loadingTimer = setTimeout(() => {\n    if (this.loading || this.asyncLock) this.refreshRouter();\n  }, 50);\n\n  return null;\n};\n\nRoute.prototype.unmount = function () {\n  let wasMounted = this.mounted;\n  // reset state\n  this.mounted = false;\n  this.asyncLock = false;\n  this.loading = false;\n  this.loadingStart = 0;\n  clearTimeout(this.loadingTimer);\n  wasMounted && this.route.onLeave && this.route.onLeave(navigate);\n};\n\nRoute.prototype.match = function (location) {\n  if (this.destroyed || !this.matcher) return false;\n\n  // (/settings/account, /settings) -> /account\n  let pathname = resolveDiff(location.pathname, this.lineage);\n  if (!pathname) {\n    // there is no more path to match on - don't match (will probably match the default route)\n    return false;\n  }\n\n  let match = this.matcher.exec(pathname);\n  let isStrict = !this.strictMatcher || this.strictMatcher.test(pathname);\n  // console.log(`ROUTE(${this.isStringPath ? 1 : 0})[${this.matcher}]: ${pathname} -> [${this.matcher}] ${match ? \"MATCH!\" : \"MISS\"}`);\n  if (!match) return false;\n\n  if (this.children) {\n    let matchedChild = this.matchChildren(location);\n\n    if (matchedChild) {\n      // console.log(`ROUTE(${this.isStringPath ? 1 : 0})[${this.matcher}]: matched child ${matchedChild.matcher}`);\n      if (this.matchedChild && this.matchedChild !== matchedChild) {\n        this.matchedChild.unmount();\n      }\n      this.matchedChild = matchedChild;\n    }\n    else if (isStrict && this.defaultRoute) {\n      // console.log(\"Strict match - choosing default route\", this.defaultRoute.matcher);\n      this.matchedChild = this.defaultRoute;\n      return true;\n    }\n    else {\n      // console.log(\"no child could be matched\", this.route.id);\n      return false;\n    }\n  }\n  else if (!isStrict) {\n    // console.log(\"not strict and no children - ignoring\", this.route.id, this.strictMatcher);\n    // not a real match\n    return false;\n  }\n\n  let params = this.params = {};\n  // extract params\n  if (match.length > 1) {\n    if (this.isStringPath) {\n      match\n        .slice(1)\n        .forEach((value, index) => {\n          if (this.paramNames[index]) params[this.paramNames[index]] = value;\n        });\n    }\n    else {\n      params.params = match.slice(1);\n    }\n  }\n\n  return true;\n};\n\nRoute.prototype.getLoader = function () {\n  return this.route.loader === null ? null : this.route.loader && $(this.route.loader) || this.parent.getLoader();\n};\n\nRoute.prototype.matchChildren = function (location) {\n  if (!this.children) return;\n\n  return matchRoute(this.children, location);\n};\n\nRoute.prototype.preparePath = function () {\n  let regex;\n\n  if (this.isStringPath) {\n    let pathRegex = this.path\n      .replace(/[\\-\\[\\]\\/\\{}\\(\\)\\+\\.\\\\\\^\\$\\|]/g, \"\\\\$&\")\n      .replace(/\\/?:([^/:?#]+)/gi, (match, g1) => {\n        this.paramNames.push(g1);\n        let paramRegex = '([^\\/]+)?';\n        if (match.indexOf('/') === 0) paramRegex = '\\/?' + paramRegex;\n\n        return paramRegex;\n      })\n      .replace(/\\*/g, '.*');\n    regex = new RegExp('^' + pathRegex);\n    this.strictMatcher = new RegExp(`^${this.lineage == '/' ? '' : this.lineage}${pathRegex}\\/?$`);\n  }\n  else {\n    regex = this.route.path;\n  }\n  // console.log(\"path (%s) created matcher %s and strict matcher %s\", this.path, regex, this.strictMatcher || null);\n  this.matcher = regex;\n  return regex;\n};\n\nfunction matchRoute(routes, location, props) {\n  // iterate route and search for a match\n  let matchedRoute;\n  routes.some(route => {\n    let matched = route.match(location);\n\n    if (matched) {\n      // console.log(\"Matched Path!\", route.matcher, route.path);\n      matchedRoute = route;\n      return true;\n    }\n    return false;\n  });\n\n  return matchedRoute;\n}\n\nfunction resolve() {\n  let joined = [];\n  let i = 0;\n  while (i < arguments.length) {\n    let item = arguments[i] || '';\n    joined.push(item.replace(/^\\/|\\/$/g, ''));\n    i++;\n  }\n\n  return '/' + joined.filter(x => !!x).join('/');\n}\n\nfunction resolveDiff(path, lineage) {\n  lineage = resolve(lineage);\n  if (lineage == '/') return path;\n  return resolve(path).replace(lineage, '');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/router.js","'use strict';\n\nimport {History} from './history';\nimport {parseUri, assign} from '../../utils';\nimport {format} from '../../helpers/url-format';\n\nconst NAVIGATION_INTERNAL_ACTION = '@@trixion_history/navigate_internal';\n\nexport default historyMiddleware;\n\n/**\n * @param {Function} store\n * @param {Object} [opts]\n * @param {Boolean} opts.replace - whether to replace to new path or to push\n * @param {Boolean} opts.scrollToTop = true - whether to scroll to the top of the page on nav change\n * @param {Boolean} opts.preserveQuery = false - whether to leave the query string intact  when only pathname changes\n * @param {Boolean} opts.preserveHash = false - whether to leave the hash intact when only pathname changes\n * @param {Boolean} opts.noBoundary = false - if tru, will allow going back outside the app\n */\nexport function historyMiddleware(store, opts) {\n  let history = new History({\n    onChange: url => store({type: NAVIGATION_INTERNAL_ACTION, payload: {url: url}})\n  });\n\n  return (state, action) => {\n    // console.log(\"ACTION\", action);\n    if (action.type !== NAVIGATION_INTERNAL_ACTION) return;\n\n    let {url} = action.payload;\n    let options = assign({scrollToTop: true}, opts, action.payload);\n\n    if (typeof url == 'number') {\n      history.go(url, options);\n    }\n    else {\n      url = url || '';\n      url = parseUri(url);\n\n      let parsedUri = {\n        hash: url.hash || (options.preserveHash ? location.hash.replace(/^#/, '') : undefined),\n        pathname: url.pathname,\n        search: url.search || (options.preserveQuery ? location.search.replace(/^\\?/, '') : undefined)\n      };\n\n      if (parsedUri.pathname === location.pathname\n        && parsedUri.search === location.search\n        && parsedUri.hash === location.hash) {\n        return;\n      }\n\n      let formattedUrl = format(parsedUri);\n\n      history.update(formattedUrl, options);\n      return {url: formattedUrl};\n    }\n  };\n}\n\n/**\n * Navigate action creator\n *\n * @param {String} url\n * @param {Object} [opts]\n * @return {Object} action\n */\nexport function navigate(url, opts = {}) {\n  opts.url = url;\n  return {\n    type: NAVIGATION_INTERNAL_ACTION,\n    payload: opts\n  };\n}\n\nexport function go(index, options = {}) {\n  index = parseInt(index);\n  // ignore NaN\n  if (index !== index) return;\n\n  options.url = index;\n\n  return {\n    type: NAVIGATION_INTERNAL_ACTION,\n    payload: options\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/store/history/index.js","'use strict';\n\nexport function History({onChange}) {\n  if (onChange) {\n    window.addEventListener('popstate', event => onChange(event.state), false);\n  }\n\n  this.history = window.history;\n}\n\nHistory.prototype.update = function (newUrl, options) {\n  let url = window.history.state;\n\n  if (url && newUrl === url || options.replace) {\n    this.replace(newUrl);\n  }\n  else {\n    this.push(newUrl);\n  }\n\n  // Scroll to the top after we update the page\n  if (options.scrollToTop !== false) window.scroll(0, 0);\n};\n\nHistory.prototype.go = function (index, options) {\n  if (!window.history.state && options.noBoundary !== true) return;\n\n  if (this.history.go) {\n    this.history.go(index);\n  }\n  else if (index < 0) {\n    this.history.back();\n  }\n};\n\nHistory.prototype.push = function (url) {\n  if (this.history.pushState) {\n    //noinspection JSCheckFunctionSignatures\n    this.history.pushState(url, null, url);\n  }\n  else {\n    // this will happen only on really really old browsers\n    window.location = url;\n  }\n};\n\nHistory.prototype.replace = function (url) {\n  if (this.history.replaceState) {\n    //noinspection JSCheckFunctionSignatures\n    this.history.replaceState(url, null, url);\n  }\n  else {\n    // this will happen only on really really old browsers\n    window.location.replace(url);\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/store/history/history.js","'use strict';\n\nexport function format(urlObj) {\n  return [\n    'protocol',\n    'auth',\n    'hostname',\n    'port',\n    'pathname',\n    'search',\n    'hash'\n  ]\n    .map(key => {\n      switch (key) {\n      case 'protocol':\n        return urlObj.protocol ? urlObj.protocol + '://' : '';\n      case 'auth':\n        return urlObj.auth ? urlObj.auth + '@' : '';\n      case 'port':\n        return urlObj.port ? ':' + urlObj.port : '';\n      case 'search':\n        return urlObj.search ? '?' + urlObj.search : '';\n      case 'hash':\n        return urlObj.hash ? '#' + urlObj.hash : '';\n      case 'hostname':\n        return urlObj[key] || '';\n      case 'pathname':\n        return '/' + (urlObj[key] || '').replace(/^\\//, '');\n      }\n    }).join('');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/helpers/url-format.js"],"sourceRoot":""}